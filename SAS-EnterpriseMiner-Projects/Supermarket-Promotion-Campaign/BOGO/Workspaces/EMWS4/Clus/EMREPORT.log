*------------------------------------------------------------*
* Report Log
Date:                May 09, 2018
Time:                15:05:56
*------------------------------------------------------------*
13193  data WORK.M29O020O;
13194  set WORK.M29O020O;
13195  if role eq 'REJECTED' then role = 'INPUT';
13196  run;

NOTE: There were 18 observations read from the data set WORK.M29O020O.
NOTE: The data set WORK.M29O020O has 18 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13197  data WORK.M29O020O;
13198  set WORK.M29O020O end=_eof_ nobs=_nobs_;
13199  output;
13200  if _eof_ then do;
13201  name = '_SEGMENT_';
13202  ROLE = 'TARGET';
13203  LEVEL = 'NOMINAL';
13204  LABEL = 'Segment Variable';
13205  TYPE = 'N';
13206  FORMAT = '';
13207  INFORMAT = '';
13208  USE='Y';
13209  output;
13210  end;
13211  run;

NOTE: There were 18 observations read from the data set WORK.M29O020O.
NOTE: The data set WORK.M29O020O has 19 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13212  *------------------------------------------------------------*;
13213  * Clus: Create decision matrix;
13214  *------------------------------------------------------------*;
13215  *------------------------------------------------------------* ;
13216  * Clus: Tree Variables Macro ;
13217  *------------------------------------------------------------* ;
13218  %macro EM_TREEVARS;
13219      AffluenceGrade CampaignViewedEmail CleanserProducts DayCareProducts
13220     FacebookLike LotionProducts LoyaltyClass MobileApplications NightRepairProducts
13221     PreviousCampaign REP_AdvertisementZone REP_Age REP_ClusterGroup REP_Gender
13222     REP_LoyaltyTime REP_Region TimeSinceLastPurchase TotalSpend
13223  %mend EM_TREEVARS;
13224  *------------------------------------------------------------* ;
13225  * Clus: Tree Targets Macro ;
13226  *------------------------------------------------------------* ;
13227  %macro EM_TREETARGETS;
13228      _SEGMENT_
13229  %mend EM_TREETARGETS;
13230  data EMWS4.EM_Clus / view=EMWS4.EM_Clus;
13231  set EMWS4.Clus_TRAIN(keep=%EM_TREEVARS %EM_TREETARGETS);
13232  run;

NOTE: DATA STEP view saved on file EMWS4.EM_CLUS.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS4.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.25 seconds
      cpu time            0.25 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.26 seconds
      cpu time            0.26 seconds
      

13233  *------------------------------------------------------------* ;
13234  * Clus: Interval Inputs Macro ;
13235  *------------------------------------------------------------* ;
13236  %macro INTINPUTS;
13237      AffluenceGrade CleanserProducts DayCareProducts LotionProducts
13238     NightRepairProducts REP_Age REP_LoyaltyTime TimeSinceLastPurchase TotalSpend
13239  %mend INTINPUTS;
13240  *------------------------------------------------------------* ;
13241  * Clus: Binary and Nominal Inputs Macro ;
13242  *------------------------------------------------------------* ;
13243  %macro NOMINPUTS;
13244      CampaignViewedEmail FacebookLike LoyaltyClass MobileApplications
13245     PreviousCampaign REP_AdvertisementZone REP_ClusterGroup REP_Gender REP_Region
13246  %mend NOMINPUTS;
13247  *------------------------------------------------------------* ;
13248  * Clus: Ordinal Inputs Macro ;
13249  *------------------------------------------------------------* ;
13250  %macro ORDINPUTS;
13251  
13252  %mend ORDINPUTS;
13253  *------------------------------------------------------------*;
13254  * Clus: Run ARBOR procedure;
13255  *------------------------------------------------------------*;

13256  proc arbor data=EMWS4.EM_Clus
13257  MAXSURRS=5
13258  ;
13259  ;
13260  input %INTINPUTS
13261  / level = interval;
13262  input %NOMINPUTS
13263  / level=nominal;
13264  target _SEGMENT_ / level=NOMINAL
13265  Criterion=PROBCHISQ
13266  ;
13267  ;
13268  Performance DISK
13269  ;
13270  MAKEMACRO NLEAVES=nleaves;
NOTE: 1385128 kilobytes of physical memory.
NOTE: Will use 20035 out of 20035 training cases.
NOTE: Using memory pool with 265322496 bytes.
NOTE: Passed training data 18 times.
NOTE: Training used 9200144 bytes of work memory.
NOTE: The subtree sequence contains 52 subtrees. The largest has 103 nodes and 52 leaves.
NOTE: Using subtree with 71 nodes and 36 leaves.
NOTE: Created macro variable NLEAVES equal to 36.
13271  save
13272  MODEL=EMWS4.Clus_PLOTDS
13273  SEQUENCE=EMWS4.Clus_OUTSEQ
13274  IMPORTANCE=EMWS4.Clus_OUTIMPORT
13275  NODESTAT=EMWS4.Clus_OUTNODES
13276  SUMMARY=WORK.OUTSUMMARY_TREE_1453FPY
13277  STATSBYNODE=WORK.OUTSTATS_TREE_1453FPY
13278  Pathlistnonmissing = WORK.OUTPATH_TREE_1453FPY
13279  Rules = WORK.OUTRULES_TREE_1453FPY
13280  ;
NOTE: The data set EMWS4.CLUS_OUTIMPORT has 18 observations and 5 variables.
NOTE: The data set EMWS4.CLUS_PLOTDS has 3886 observations and 4 variables.
NOTE: The data set EMWS4.CLUS_OUTNODES has 71 observations and 20 variables.
NOTE: The data set WORK.OUTPATH_TREE_1453FPY has 335 observations and 7 variables.
NOTE: The data set WORK.OUTRULES_TREE_1453FPY has 1290 observations and 6 variables.
NOTE: The data set EMWS4.CLUS_OUTSEQ has 52 observations and 11 variables.
NOTE: The data set WORK.OUTSTATS_TREE_1453FPY has 284 observations and 5 variables.
NOTE: The data set WORK.OUTSUMMARY_TREE_1453FPY has 12 observations and 5 variables.
13281  run;

13282  quit;

NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS4.IDS_DATA.
NOTE: There were 23000 observations read from the data set EMWS4.REPL_TRAIN.
NOTE: There were 20035 observations read from the data set EMWS4.FILTER_TRAIN.
NOTE: View EMWS4.EM_CLUS.VIEW used (Total process time):
      real time           3.28 seconds
      cpu time            3.23 seconds
      
NOTE: There were 20035 observations read from the data set EMWS4.CLUS_TRAIN.
NOTE: There were 20035 observations read from the data set EMWS4.EM_CLUS.
NOTE: The data set WORK._NAMEDAT has 2 observations and 5 variables.
NOTE: PROCEDURE ARBOR used (Total process time):
      real time           3.29 seconds
      cpu time            3.25 seconds
      

13283  data EMWS4.Clus_OUTIMPORT;
13284  set EMWS4.Clus_OUTIMPORT;
13285  label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel, noquote))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, noquote))" NRULES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nrules_vlabel, noquote))" IMPORTANCE =
13286     "%sysfunc(sasmsg(sashelp.dmine, rpt_importance_vlabel, noquote))" NSURROGATES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nsurrogates_vlabel, noquote))"
13287  ;
13288  run;

NOTE: There were 18 observations read from the data set EMWS4.CLUS_OUTIMPORT.
NOTE: The data set EMWS4.CLUS_OUTIMPORT has 18 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13289  filename x "D:\Nida\Data mining\datamining\BOGO\Workspaces\EMWS4\Clus\ENGLISHRULES.txt" encoding='utf-8' NOBOM;

13290  data temp;
13291  length varname $30;
13292  retain varname;
13293  set WORK.OUTPATH_TREE_1453FPY;
13294  if ^missing(variable) then varname=variable;
13295  else if ^missing(var_name) then varname=var_name;
13296  output;
13297  run;

NOTE: There were 335 observations read from the data set WORK.OUTPATH_TREE_1453FPY.
NOTE: The data set WORK.TEMP has 335 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13298  proc sort data=temp;
13299  by node;
13300  run;

NOTE: There were 335 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 335 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13301  proc sort data=EMWS4.Clus_OUTNODES out=outnodes;
13302  by node;
13303  run;

NOTE: There were 71 observations read from the data set EMWS4.CLUS_OUTNODES.
NOTE: The data set WORK.OUTNODES has 71 observations and 20 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

13304  data temp;
13305  merge temp(in=_a) outnodes(keep= node
13306  NPRIORS
13307  P__SEGMENT_2
13308  P__SEGMENT_1
13309  );
13310  by node;
13311  if _a;
13312  run;

NOTE: There were 335 observations read from the data set WORK.TEMP.
NOTE: There were 71 observations read from the data set WORK.OUTNODES.
NOTE: The data set WORK.TEMP has 335 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13313  proc sort data=temp;
13314  by node descending varname descending numeric_value;
13315  run;

NOTE: There were 335 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 335 observations and 11 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13316  data _null_;
13317  file x;
13318  set temp;
13319  by node descending varname;
13320  retain origvar oldnode string;
13321  length origvar $32 oldnode 8 string $200;
13322  if _n_ = 1 then do;
13323  origvar = varname;
13324  oldnode = node;
13325  end;
13326  if first.node then do;
13327  put "&EM_CODEBAR";
13328  put " Node = " node;
13329  put "&EM_CODEBAR";
13330  end;
13331  if first.varname then do;
13332  if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
13333  if MISSING(CHARACTER_VALUE) then do;
13334  if NUMERIC_VALUE ne . then do;
13335  if ^first.node then do;
13336  string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
13337  end;
13338  else do;
13339  string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
13340  end;
13341  end;
13342  end;
13343  else do;
13344  if ^first.node then do;
13345  string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
13346  end;
13347  else do;
13348  string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
13349  end;
13350  end;
13351  end;
13352  else if RELATION in ("=") then do;
13353  if ^first.node then do;
13354  string = "AND "||strip(varname) ||" IS ONE OF: "||character_value;
13355  end;
13356  else do;
13357  string = "if "|| strip(varname) ||" IS ONE OF: "||character_value;
13358  end;
13359  end;
13360  else if RELATION in ("ISMISSING") then do;
13361  if ^first.node then do;
13362  string = " AND "|| strip(varname) || " equals Missing";
13363  end;
13364  else do;
13365  string = "if "|| strip(varname) ||" equals Missing";
13366  end;
13367  end;
13368  else if RELATION in ("ISNOTMISSING") then do;
13369  if ^first.node then do;
13370  string = " AND "|| strip(varname) || " equals All Values";
13371  end;
13372  else do;
13373  string = "if "|| strip(varname) ||" equals All Values";
13374  end;
13375  end;
13376  if ^missing(varname) then origvar = varname;
13377  oldnode=node;
13378  end;
13379  else do;
13380  if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
13381  if MISSING(CHARACTER_VALUE) then do;
13382  if NUMERIC_VALUE ne . then do;
13383  if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
13384  else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
13385  end;
13386  end;
13387  else do;
13388  if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
13389  else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
13390  end;
13391  end;
13392  else if RELATION in ("=") then do;
13393  string = strip(string)||", "||strip(character_value);
13394  end;
13395  else if RELATION in ("ISMISSING") then do;
13396  end;
13397  if ^missing(varname) then origvar = varname;
13398  oldnode=node;
13399  end;
13400  if last.varname then do;
13401  if RELATION in ("ISMISSING") then do;
13402  if ^first.varname then do;
13403  string = strip(string) || " or MISSING";
13404  end;
13405  end;
13406  put string;
13407  if ^missing(varname) then origvar = varname;
13408  oldnode=node;
13409  end;
13410  if last.node then do;
13411  put "then ";
13412  put " Tree Node Identifier   = " node;
13413  put " Number of Observations = " NPRIORS;
13414  put " Predicted: _SEGMENT_=2  = " P__SEGMENT_2;
13415  put " Predicted: _SEGMENT_=1  = " P__SEGMENT_1;
13416  put " ";
13417  if ^missing(varname) then origvar = varname;
13418  oldnode=node;
13419  end;
13420  run;

NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      13336:67    13339:66    13383:108   13384:72    
NOTE: The file X is:
      Filename=D:\Nida\Data mining\datamining\BOGO\Workspaces\EMWS4\Clus\ENGLISHRULES.txt,
      RECFM=V,LRECL=131068,File Size (bytes)=0,
      Last Modified=09May2018:15:06:00,
      Create Time=09May2018:15:06:00

NOTE: 465 records were written to the file X.
      The minimum record length was 1.
      The maximum record length was 67.
NOTE: There were 335 observations read from the data set WORK.TEMP.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13421  filename x;
NOTE: Fileref X has been deassigned.

13422  /* belowtext */
13423  data templabel;
13424  set WORK.OUTRULES_TREE_1453FPY;
13425  if ((ROLE="PRIMARY") AND (STAT ="LABEL"));
13426  rename character_value = belowtext;
13427  keep NODE character_value;
13428  run;

NOTE: There were 1290 observations read from the data set WORK.OUTRULES_TREE_1453FPY.
NOTE: The data set WORK.TEMPLABEL has 12 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13429  data tempvar;
13430  set WORK.OUTRULES_TREE_1453FPY;
13431  if ((ROLE="PRIMARY") AND (STAT="VARIABLE"));
13432  keep NODE character_value;
13433  run;

NOTE: There were 1290 observations read from the data set WORK.OUTRULES_TREE_1453FPY.
NOTE: The data set WORK.TEMPVAR has 35 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13434  proc sort data=templabel;
13435  by node;
13436  run;

NOTE: There were 12 observations read from the data set WORK.TEMPLABEL.
NOTE: The data set WORK.TEMPLABEL has 12 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13437  proc sort data=tempvar;
13438  by node;
13439  run;

NOTE: There were 35 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 35 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13440  data tempbelow;
13441  merge templabel tempvar;
13442  by node;
13443  if missing(belowtext) then belowtext= character_value;
13444  keep node belowtext;
13445  run;

NOTE: There were 12 observations read from the data set WORK.TEMPLABEL.
NOTE: There were 35 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPBELOW has 35 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13446  proc sort data=tempbelow;
13447  by node;
13448  run;

NOTE: There were 35 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.TEMPBELOW has 35 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13449  /* abovetext */
13450  data tempoutrules;
13451  set WORK.OUTRULES_TREE_1453FPY;
13452  if ((ROLE='PRIMARY') AND(STAT in ("INTERVAL", "ORDINAL", "NOMINAL")));
13453  run;

NOTE: There were 1290 observations read from the data set WORK.OUTRULES_TREE_1453FPY.
NOTE: The data set WORK.TEMPOUTRULES has 42 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13454  proc sort data=tempoutrules;
13455  by node numeric_value;
13456  run;

NOTE: There were 42 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPOUTRULES has 42 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13457  data tempabove;
13458  set tempoutrules(rename=(node=parent));
13459  by parent numeric_value;
13460  retain abovetext tempstring flag branch origval origchar;
13461  *length abovetext tempstring origchar $45;
13462  length abovetext $256;
13463  length tempstring origchar $64;
13464  if STAT in ("INTERVAL", "ORDINAL") then do;
13465  if first.parent then do;
13466  if missing(character_value) then do;
13467  numeric_value = round(numeric_value, 0.0001);
13468  abovetext = "< "||strip(NUMERIC_VALUE);
13469  branch = 1;
13470  origval = numeric_value;
13471  output;
13472  end;
13473  else do;
13474  abovetext = "< "||strip(CHARACTER_VALUE);
13475  branch = 1;
13476  origchar = character_value;
13477  output;
13478  end;
13479  if first.parent AND last.parent then do;
13480  if missing(character_value) then do;
13481  numeric_value = round(numeric_value, 0.0001);
13482  branch = branch + 1;
13483  abovetext = ">= "||strip(NUMERIC_VALUE);
13484  output;
13485  end;
13486  else do;
13487  branch = branch + 1;
13488  abovetext = ">= "||strip(CHARACTER_VALUE);
13489  output;
13490  end;
13491  end;
13492  end;
13493  else if last.parent then do;
13494  if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
13495  if missing(character_value) then do;
13496  numeric_value = round(numeric_value, 0.0001);
13497  abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
13498  end;
13499  else do;
13500  abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
13501  end;
13502  branch = branch + 1;
13503  output;
13504  if missing(character_value) then do;
13505  numeric_value = round(numeric_value, 0.0001);
13506  abovetext = ">= "||strip(NUMERIC_VALUE);
13507  end;
13508  else do;
13509  abovetext = ">= "||strip(CHARACTER_VALUE);
13510  end;
13511  branch = branch + 1;
13512  output;
13513  end;
13514  else do;
13515  if missing(character_value) then do;
13516  numeric_value = round(numeric_value, 0.0001);
13517  abovetext = ">= "||strip(NUMERIC_VALUE);
13518  end;
13519  else do;
13520  abovetext = ">= "||strip(CHARACTER_VALUE);
13521  end;
13522  branch = branch + 1;
13523  output;
13524  end;
13525  end;
13526  else do;
13527  if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
13528  if missing(character_value) then do;
13529  numeric_value = round(numeric_value,0.0001);
13530  abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
13531  origval = numeric_value;
13532  end;
13533  else do;
13534  abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
13535  origchar = character_value;
13536  end;
13537  branch = branch + 1;
13538  output;
13539  end;
13540  else do;
13541  if missing(character_value) then do;
13542  numeric_value = round(numeric_value, 0.0001);
13543  abovetext = ">= "||strip(NUMERIC_VALUE);
13544  origval = numeric_value;
13545  end;
13546  else do;
13547  abovetext = ">= "||strip(CHARACTER_VALUE);
13548  origval = character_value;
13549  end;
13550  branch = branch + 1;
13551  output;
13552  end;
13553  end;
13554  end;
13555  else do;
13556  if first.numeric_value then do;
13557  flag = 0;
13558  abovetext = CHARACTER_VALUE;
13559  branch = numeric_value;
13560  if first.numeric_value AND last.numeric_value then do;
13561  output;
13562  end;
13563  end;
13564  else if last.numeric_value then do;
13565  if flag=0 then do;
13566  tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
13567  length = length(strip(tempstring));
13568  if length < 32 then do;
13569  abovetext = strip(tempstring);
13570  end;
13571  else do;
13572  abovetext = strip(abovetext)||", ...";
13573  flag = 1;
13574  end;
13575  end;
13576  branch = numeric_value;
13577  output;
13578  end;
13579  else do;
13580  if flag=0 then do;
13581  tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
13582  length = length(strip(tempstring));
13583  if length < 32 then do;
13584  abovetext = strip(tempstring);
13585  end;
13586  else do;
13587  abovetext = strip(abovetext)||", ...";
13588  flag=1;
13589  end;
13590  end;
13591  branch = numeric_value;
13592  end;
13593  end;
13594  keep parent branch abovetext;
13595  run;

NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      13468:25   13483:26   13497:24   13497:47   13506:26   13517:26   13530:24   13530:47   13543:26   
NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      13548:11   
NOTE: There were 42 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPABOVE has 70 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13596  /* MIssing value to abovetext */
13597  data tempmissing;
13598  set WORK.OUTRULES_TREE_1453FPY;
13599  if ((ROLE="PRIMARY") AND (STAT in ("MISSING")));
13600  rename node=parent numeric_value=branch character_value=misschar;
13601  run;

NOTE: There were 1290 observations read from the data set WORK.OUTRULES_TREE_1453FPY.
NOTE: The data set WORK.TEMPMISSING has 35 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13602  proc sort data=work.tempabove;
13603  by parent branch;
13604  run;

NOTE: There were 70 observations read from the data set WORK.TEMPABOVE.
NOTE: The data set WORK.TEMPABOVE has 70 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13605  proc sort data=EMWS4.Clus_OUTNODES out=tempoutnodes;
13606  by parent branch;
13607  run;

NOTE: There were 71 observations read from the data set EMWS4.CLUS_OUTNODES.
NOTE: The data set WORK.TEMPOUTNODES has 71 observations and 20 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13608  proc sort data=tempmissing;
13609  by parent branch;
13610  run;

NOTE: There were 35 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.TEMPMISSING has 35 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13611  data WORK.Clus_outnodes;
13612  merge work.tempabove tempoutNodes(drop=abovetext ) tempmissing(in=_a);
13613  by parent branch;
13614  length traintotal validtotal 8;
13615  retain traintotal validtotal;
13616  if _a then do;
13617  if ^MISSING(abovetext) then do;
13618  abovetext= strip(abovetext)||" %sysfunc(sasmsg(sashelp.dmine, tree_ormiss_vlabel, noquote))";
13619  end;
13620  else do;
13621  abovetext = " %sysfunc(sasmsg(sashelp.dmine, tree_missonly_vlabel, noquote))";
13622  end;
13623  end;
13624  if MISSING(abovetext) then abovetext="%sysfunc(sasmsg(sashelp.dmine, tree_nonmiss_vlabel, noquote))";
13625  if node=1 then do;
13626  traintotal = N;
13627  validtotal=VN;
13628  end;
13629  label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
13630  drop role rank stat misschar belowtext;
13631  run;

NOTE: Variable VN is uninitialized.
NOTE: There were 70 observations read from the data set WORK.TEMPABOVE.
NOTE: There were 71 observations read from the data set WORK.TEMPOUTNODES.
NOTE: There were 35 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.CLUS_OUTNODES has 71 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
      

13632  proc sort data=WORK.Clus_outnodes;
13633  by node;
13634  run;

NOTE: There were 71 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: The data set WORK.CLUS_OUTNODES has 71 observations and 22 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13635  proc sort data=tempbelow;
13636  by node;
13637  run;

NOTE: Input data set is already sorted, no sorting done.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13638  data WORK.Clus_outnodes;
13639  merge WORK.Clus_outnodes tempbelow;
13640  by node;
13641  run;

NOTE: There were 71 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: There were 35 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.CLUS_OUTNODES has 71 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS4.IDS_DATA.
NOTE: There were 23000 observations read from the data set EMWS4.REPL_TRAIN.
NOTE: There were 20035 observations read from the data set EMWS4.FILTER_TRAIN.
NOTE: View EMWS4.EM_CLUS.VIEW used (Total process time):
      real time           0.63 seconds
      cpu time            0.62 seconds
      
NOTE: There were 20035 observations read from the data set EMWS4.CLUS_TRAIN.
13642  data tempoutstats;
13643  set WORK.OUTSTATS_TREE_1453FPY;
13644  length tarlevel $8;
13645  tarlevel ="NOMINAL";
13646  run;

NOTE: There were 284 observations read from the data set WORK.OUTSTATS_TREE_1453FPY.
NOTE: The data set WORK.TEMPOUTSTATS has 284 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13647  data EMWS4.Clus_TREE_PLOT;
13648  length NODETEXT TEXTALL $800 N NODECOLOR 8;
13649  set WORK.Clus_outnodes;
13650  label parent = "%sysfunc(sasmsg(sashelp.dmine, rpt_parentID_vlabel, noquote))" depth = "%sysfunc(sasmsg(sashelp.dmine, rpt_depth_vlabel, noquote))" belowtext= "%sysfunc(sasmsg(sashelp.dmine, rpt_belowtext_vlabel, noquote))" abovetext =
13651     "%sysfunc(sasmsg(sashelp.dmine, rpt_abovetext_vlabel, noquote))" linkwidth = "%sysfunc(sasmsg(sashelp.dmine, rpt_linkwidth_vlabel, noquote))" nodetext = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodetext_vlabel, noquote))" textall =
13652     "%sysfunc(sasmsg(sashelp.dmine, rpt_textall_vlabel, noquote))" N = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainn_vlabel, noquote))" nodecolor = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodecolor_vlabel, noquote))" node =
13653     "%sysfunc(sasmsg(sashelp.dmine, rpt_node_vlabel, noquote))";
13654  keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR;
13655  run;

NOTE: Variable TEXTALL is uninitialized.
NOTE: Variable NODECOLOR is uninitialized.
NOTE: There were 71 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: The data set EMWS4.CLUS_TREE_PLOT has 71 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

13656  proc sort data=EMWS4.Clus_TREE_PLOT;
13657  by node;
13658  run;

NOTE: There were 71 observations read from the data set EMWS4.CLUS_TREE_PLOT.
NOTE: The data set EMWS4.CLUS_TREE_PLOT has 71 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13659  proc sort data=tempoutstats;
13660  by node;
13661  run;

NOTE: There were 284 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set WORK.TEMPOUTSTATS has 284 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13662  data EMWS4.Clus_TREE_PLOT;
13663  merge EMWS4.Clus_TREE_PLOT tempoutstats;
13664  length text $800 _RASE_ P__SEGMENT_2 8;
13665  retain P__SEGMENT_2 eventlevel;
13666  by node;
13667  if statname='N' then N=statvalue;
13668  if statname='NPRIORS' then N=statvalue;
13669  if statname='PREDICTION' then eventlevel=category;
13670  _RASE_ = .;
13671  if tarlevel ^= 'INTERVAL' then do;
13672  if STATNAME = 'PROBABILITY' then do;
13673  if CATEGORY=EVENTLEVEL then do;
13674  nodetext = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
13675  text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
13676  P__SEGMENT_2 = round(STATVALUE, .01);
13677  end;
13678  else do;
13679  text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
13680  end;
13681  textall = strip(textall)||'0A'x||strip( text);
13682  end;
13683  if last.node then do;
13684  nodetext = trim(nodetext)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
13685  textall = trim(textall)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
13686  output EMWS4.Clus_TREE_PLOT;
13687  end;
13688  end;
13689  else do;
13690  if statname='RASE' then _RASE_=statvalue;
13691  label _RASE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_trase_vlabel, noquote))";
13692  if STATNAME = 'PREDICTION' then do;
13693  nodetext= "%sysfunc(sasmsg(sashelp.dmine, rpt_average_vlabel, noquote))"|| put(STATVALUE, 13.4)||'0A'x|| "%sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
13694  textall = nodetext;
13695  P__SEGMENT_2 = STATVALUE;
13696  ;
13697  ;
13698  end;
13699  if last.node then do;
13700  output EMWS4.Clus_TREE_PLOT;
13701  end;
13702  ;
13703  end;
13704  label P__SEGMENT_2 = "%sysfunc(sasmsg(sashelp.dmine, rpt_predictedvar_vlabel, noquote))";
13705  keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR _RASE_ P__SEGMENT_2;
13706  run;

NOTE: There were 71 observations read from the data set EMWS4.CLUS_TREE_PLOT.
NOTE: There were 284 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set EMWS4.CLUS_TREE_PLOT has 71 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13707  data tempcolor;
13708  set WORK.OUTSTATS_TREE_1453FPY;
13709  retain eventlevel;
13710  if STATNAME='PREDICTION' then eventlevel=CATEGORY;
13711  run;

NOTE: There were 284 observations read from the data set WORK.OUTSTATS_TREE_1453FPY.
NOTE: The data set WORK.TEMPCOLOR has 284 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13712  data tempcolor;
13713  set tempcolor;
13714  if 'NOMINAL' ne 'INTERVAL' then do;
13715  if CATEGORY=EVENTLEVEL AND STATNAME="PROBABILITY";
13716  end;
13717  else do;
13718  if STATNAME="PREDICTION";
13719  end;
13720  run;

NOTE: There were 284 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 71 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13721  data tempcolor;
13722  set tempcolor;
13723  length nodecolor 8;
13724  if 'NOMINAL' ne 'INTERVAL' then do;
13725  nodecolor = round(100*(STATVALUE), .01);
13726  end;
13727  else do;
13728  nodecolor=round(statvalue, .01);
13729  end;
13730  keep node nodecolor;
13731  run;

NOTE: There were 71 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 71 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13732  proc sort data=EMWS4.Clus_TREE_PLOT;
13733  by node;
13734  run;

NOTE: There were 71 observations read from the data set EMWS4.CLUS_TREE_PLOT.
NOTE: The data set EMWS4.CLUS_TREE_PLOT has 71 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13735  proc sort data=tempcolor;
13736  by node;
13737  run;

NOTE: There were 71 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 71 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13738  data EMWS4.Clus_TREE_PLOT;
13739  merge EMWS4.Clus_TREE_PLOT tempcolor;
13740  by node;
13741  length traintotal 8;
13742  retain traintotal;
13743  label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
13744  if node=1 then do;
13745  traintotal = N;
13746  end;
13747  if NODE eq . then delete;
13748  run;

NOTE: There were 71 observations read from the data set EMWS4.CLUS_TREE_PLOT.
NOTE: There were 71 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set EMWS4.CLUS_TREE_PLOT has 71 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13749  data EMWS4.Clus_TREE_PLOT;
13750  set EMWS4.Clus_TREE_PLOT;
13751  textall = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodeId_vlabel, noquote, )):"|| put(Node, 13.)||'0A'x||trim(textall);
13752  run;

NOTE: There were 71 observations read from the data set EMWS4.CLUS_TREE_PLOT.
NOTE: The data set EMWS4.CLUS_TREE_PLOT has 71 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13753  data tempout;
13754  set WORK.Clus_outnodes;
13755  run;

NOTE: There were 71 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: The data set WORK.TEMPOUT has 71 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13756  proc sort data=tempout;
13757  by descending P__SEGMENT_2;
13758  run;

NOTE: There were 71 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TEMPOUT has 71 observations and 23 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

13759  data tree_temp;
13760  set tempout;
13761  if LEAF ne .;
13762  label index="%sysfunc(sasmsg(sashelp.dmine, rpt_leafindex_vlabel  , NOQUOTE))";
13763  label percevent_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_perc_train_vlabel  , NOQUOTE))";
13764  label perc_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_percevent_train_vlabel  , NOQUOTE))";
13765  label tprob="%sysfunc(sasmsg(sashelp.dmine, rpt_prob_vlabel  , NOQUOTE, %nrbquote()))";
13766  tprob = round(P__SEGMENT_2, .01);
13767  percevent_train = round ( tprob*100, .01);
13768  *perc_train =round( ( N / traintotal)*100, .001);
13769  perc_train =round( ( N / traintotal), .01);
13770  if missing(perc_train) then perc_train = round( linkwidth*100, .001);
13771  index = _n_;
13772  keep NODE index tprob perc_train percevent_train
13773  ;
13774  run;

NOTE: There were 71 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TREE_TEMP has 36 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
      

13775  proc sort data=tree_temp;
13776  by NODE;
13777  run;

NOTE: There were 36 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set WORK.TREE_TEMP has 36 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13778  proc sort data=EMWS4.Clus_TREE_PLOT;
13779  by NODE;
13780  run;

NOTE: There were 71 observations read from the data set EMWS4.CLUS_TREE_PLOT.
NOTE: The data set EMWS4.CLUS_TREE_PLOT has 71 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13781  data EMWS4.Clus_TREE_PLOT;
13782  merge EMWS4.Clus_TREE_PLOT tree_temp;
13783  by NODE;
13784  run;

NOTE: There were 71 observations read from the data set EMWS4.CLUS_TREE_PLOT.
NOTE: There were 36 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set EMWS4.CLUS_TREE_PLOT has 71 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13785  proc sort data=EMWS4.Clus_TREE_PLOT;
13786  by node index;
13787  run;

NOTE: There were 71 observations read from the data set EMWS4.CLUS_TREE_PLOT.
NOTE: The data set EMWS4.CLUS_TREE_PLOT has 71 observations and 17 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13788  title9 ' ';
13789  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_VariableImportance_title, NOQUOTE))";
13790  proc print data=EMWS4.Clus_OUTIMPORT(where=(IMPORTANCE>0)) noobs label;
13791  run;

NOTE: There were 16 observations read from the data set EMWS4.CLUS_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The PROCEDURE PRINT printed page 4.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13792  title10;

13793  data WORK.M22G_S91;
13794  set WORK.M22G_S91;
13795  if role eq 'REJECTED' then role = 'INPUT';
13796  run;

NOTE: There were 26 observations read from the data set WORK.M22G_S91.
NOTE: The data set WORK.M22G_S91 has 26 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13797  proc sort data=EMWS4.Clus_OUTIMPORT out=WORK.Clus_GRAPHVARS(keep=NAME);
13798  where IMPORTANCE>0;
13799  by NAME;
13800  run;

NOTE: There were 16 observations read from the data set EMWS4.CLUS_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The data set WORK.CLUS_GRAPHVARS has 16 observations and 1 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13801  proc sort data = WORK.M22G_S91;
13802  by NAME;
13803  run;

NOTE: There were 26 observations read from the data set WORK.M22G_S91.
NOTE: The data set WORK.M22G_S91 has 26 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13804  data WORK.M22G_S91;
13805  merge WORK.M22G_S91 WORK.Clus_GRAPHVARS(in=_b_);
13806  by NAME;
13807  if _b_ or ROLE = "FREQ" or REPORT="Y" then output;
13808  run;

NOTE: There were 26 observations read from the data set WORK.M22G_S91.
NOTE: There were 16 observations read from the data set WORK.CLUS_GRAPHVARS.
NOTE: The data set WORK.M22G_S91 has 16 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13809  data WORK.M22G_S91;
13810  set WORK.M22G_S91 end=_eof_ nobs=_nobs_;
13811  output;
13812  if _eof_ then do;
13813  name = '_SEGMENT_';
13814  ROLE = 'BY';
13815  LEVEL = 'NOMINAL';
13816  LABEL = 'Segment Variable';
13817  TYPE = 'N';
13818  FORMAT = '';
13819  INFORMAT = '';
13820  output;
13821  end;
13822  run;

NOTE: There were 16 observations read from the data set WORK.M22G_S91.
NOTE: The data set WORK.M22G_S91 has 17 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13823  *------------------------------------------------------------* ;
13824  * Clus: STDIZE Variables Macro ;
13825  *------------------------------------------------------------* ;
13826  %macro stdizevar;
13827      AffluenceGrade CleanserProducts LotionProducts NightRepairProducts REP_Age
13828     REP_LoyaltyTime TimeSinceLastPurchase TotalSpend
13829  %mend stdizevar;
13830  *------------------------------------------------------------*;
13831  * Clus: Computing Summary Statistics;
13832  *------------------------------------------------------------*;
13833  proc stdize
13834  data = EMWS4.Clus_TRAIN
13835  out=_null_
13836  outstat=WORK.Clus_STAT
13837  add=0 fuzz=1E-14 initial=MAD
13838  vardef=df
13839  method=STD
13840  mult=1
13841  pctlmtd=ORD_STAT pctldef=2
13842  pctlpts=(
13843  0
13844  100
13845  )
13846  ;
13847  var %stdizevar;
13848  run;

NOTE: INITIAL= will be ignored.
NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS4.IDS_DATA.
NOTE: There were 23000 observations read from the data set EMWS4.REPL_TRAIN.
NOTE: View EMWS4.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.62 seconds
      cpu time            0.64 seconds
      
NOTE: There were 20035 observations read from the data set EMWS4.FILTER_TRAIN.
NOTE: There were 20035 observations read from the data set EMWS4.CLUS_TRAIN.
NOTE: The data set WORK.CLUS_STAT has 10 observations and 9 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.64 seconds
      cpu time            0.64 seconds
      

13849  quit;

13850  data WORK.Clus_MINMAX;
13851  set WORK.Clus_STAT;
13852  where _TYPE_ in('P0','P100');
13853  if _TYPE_='P0' then _TYPE_='MIN';
13854  else if _TYPE_='P100' then _TYPE_='MAX';
13855  run;

NOTE: There were 2 observations read from the data set WORK.CLUS_STAT.
      WHERE _TYPE_ in ('P0', 'P100');
NOTE: The data set WORK.CLUS_MINMAX has 2 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

13856  proc transpose data=WORK.Clus_MINMAX out=WORK.Clus_MINMAX(drop=_LABEL_ rename=(_NAME_=_VARIABLE_));
13857  id _TYPE_;
13858  run;

NOTE: There were 2 observations read from the data set WORK.CLUS_MINMAX.
NOTE: The data set WORK.CLUS_MINMAX has 8 observations and 3 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13859  data WORK.Clus_UGRID;
13860  set WORK.Clus_MINMAX;
13861  B1 = MIN + (1-1)*(MAX-MIN)/8;
13862  B2 = MIN + (2-1)*(MAX-MIN)/8;
13863  B3 = MIN + (3-1)*(MAX-MIN)/8;
13864  B4 = MIN + (4-1)*(MAX-MIN)/8;
13865  B5 = MIN + (5-1)*(MAX-MIN)/8;
13866  B6 = MIN + (6-1)*(MAX-MIN)/8;
13867  B7 = MIN + (7-1)*(MAX-MIN)/8;
13868  B8 = MIN + (8-1)*(MAX-MIN)/8;
13869  B9 = MIN + (9-1)*(MAX-MIN)/8;
13870  drop MIN MAX;
13871  run;

NOTE: There were 8 observations read from the data set WORK.CLUS_MINMAX.
NOTE: The data set WORK.CLUS_UGRID has 8 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13872  *------------------------------------------------------------*;
13873  * Clus: Creating formats for binning interval variables;
13874  *------------------------------------------------------------*;
13875  proc format;
13876  value F1_
13877  1-4.625 = "1:4.625"
13878  4.625-8.25 = "4.625:8.25"
13879  8.25-11.875 = "8.25:11.875"
13880  11.875-15.5 = "11.875:15.5"
13881  15.5-19.125 = "15.5:19.125"
13882  19.125-22.75 = "19.125:22.75"
13883  22.75-26.375 = "22.75:26.375"
13884  26.375-30 = "26.375:30"
13885  ;
NOTE: Format F1_ has been output.
13886  value F2_
13887  0-0.5 = "0:0.5"
13888  0.5-1 = "0.5:1"
13889  1-1.5 = "1:1.5"
13890  1.5-2 = "1.5:2"
13891  2-2.5 = "2:2.5"
13892  2.5-3 = "2.5:3"
13893  3-3.5 = "3:3.5"
13894  3.5-4 = "3.5:4"
13895  ;
NOTE: Format F2_ has been output.
13896  value F3_
13897  0-0.625 = "0:0.625"
13898  0.625-1.25 = "0.625:1.25"
13899  1.25-1.875 = "1.25:1.875"
13900  1.875-2.5 = "1.875:2.5"
13901  2.5-3.125 = "2.5:3.125"
13902  3.125-3.75 = "3.125:3.75"
13903  3.75-4.375 = "3.75:4.375"
13904  4.375-5 = "4.375:5"
13905  ;
NOTE: Format F3_ has been output.
13906  value F4_
13907  0-0.25 = "0:0.25"
13908  0.25-0.5 = "0.25:0.5"
13909  0.5-0.75 = "0.5:0.75"
13910  0.75-1 = "0.75:1"
13911  1-1.25 = "1:1.25"
13912  1.25-1.5 = "1.25:1.5"
13913  1.5-1.75 = "1.5:1.75"
13914  1.75-2 = "1.75:2"
13915  ;
NOTE: Format F4_ has been output.
13916  value F5_
13917  18-25.625 = "18:25.625"
13918  25.625-33.25 = "25.625:33.25"
13919  33.25-40.875 = "33.25:40.875"
13920  40.875-48.5 = "40.875:48.5"
13921  48.5-56.125 = "48.5:56.125"
13922  56.125-63.75 = "56.125:63.75"
13923  63.75-71.375 = "63.75:71.375"
13924  71.375-79 = "71.375:79"
13925  ;
NOTE: Format F5_ has been output.
13926  value F6_
13927  0-4.875 = "0:4.875"
13928  4.875-9.75 = "4.875:9.75"
13929  9.75-14.625 = "9.75:14.625"
13930  14.625-19.5 = "14.625:19.5"
13931  19.5-24.375 = "19.5:24.375"
13932  24.375-29.25 = "24.375:29.25"
13933  29.25-34.125 = "29.25:34.125"
13934  34.125-39 = "34.125:39"
13935  ;
NOTE: Format F6_ has been output.
13936  value F7_
13937  1-5.125 = "1:5.125"
13938  5.125-9.25 = "5.125:9.25"
13939  9.25-13.375 = "9.25:13.375"
13940  13.375-17.5 = "13.375:17.5"
13941  17.5-21.625 = "17.5:21.625"
13942  21.625-25.75 = "21.625:25.75"
13943  25.75-29.875 = "25.75:29.875"
13944  29.875-34 = "29.875:34"
13945  ;
NOTE: Format F7_ has been output.
13946  value F8_
13947  10-6258.75 = "10:6258.8"
13948  6258.75-12507.5 = "6258.8:12508"
13949  12507.5-18756.25 = "12508:18756"
13950  18756.25-25005 = "18756:25005"
13951  25005-31253.75 = "25005:31254"
13952  31253.75-37502.5 = "31254:37503"
13953  37502.5-43751.25 = "37503:43751"
13954  43751.25-50000 = "43751:50000"
13955  ;
NOTE: Format F8_ has been output.
13956  run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13957  ods listing close;
13958  ods output crosstabfreqs=WORK.TEMPFREQ;
13959  proc freq data = EMWS4.Clus_TRAIN order=formatted addnames;
13960  table AffluenceGrade * _SEGMENT_ / missing;
13961  table CampaignViewedEmail * _SEGMENT_ / missing;
13962  table CleanserProducts * _SEGMENT_ / missing;
13963  table FacebookLike * _SEGMENT_ / missing;
13964  table LotionProducts * _SEGMENT_ / missing;
13965  table LoyaltyClass * _SEGMENT_ / missing;
13966  table NightRepairProducts * _SEGMENT_ / missing;
13967  table PreviousCampaign * _SEGMENT_ / missing;
13968  table REP_AdvertisementZone * _SEGMENT_ / missing;
13969  table REP_Age * _SEGMENT_ / missing;
13970  table REP_ClusterGroup * _SEGMENT_ / missing;
13971  table REP_Gender * _SEGMENT_ / missing;
13972  table REP_LoyaltyTime * _SEGMENT_ / missing;
13973  table REP_Region * _SEGMENT_ / missing;
13974  table TimeSinceLastPurchase * _SEGMENT_ / missing;
13975  table TotalSpend * _SEGMENT_ / missing;
13976  format AFFLUENCEGRADE F1_.;
13977  format CLEANSERPRODUCTS F2_.;
13978  format LOTIONPRODUCTS F3_.;
13979  format NIGHTREPAIRPRODUCTS F4_.;
13980  format REP_AGE F5_.;
13981  format REP_LOYALTYTIME F6_.;
13982  format TIMESINCELASTPURCHASE F7_.;
13983  format TOTALSPEND F8_.;
13984  run;

NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS4.IDS_DATA.
NOTE: There were 23000 observations read from the data set EMWS4.REPL_TRAIN.
NOTE: View EMWS4.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.79 seconds
      cpu time            0.73 seconds
      
NOTE: There were 20035 observations read from the data set EMWS4.FILTER_TRAIN.
NOTE: The data set WORK.TEMPFREQ has 330 observations and 27 variables.
NOTE: There were 20035 observations read from the data set EMWS4.CLUS_TRAIN.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.85 seconds
      cpu time            0.79 seconds
      

13985  quit;
13986  ods listing;
13987  data EMWS4.Clus_PROFILE(keep=_VARIABLE_ _SEGMENT_ TYPE COUNT PERCENT _X_ _XLABEL_);
13988  label _VARIABLE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel, NOQUOTE))" _SEGMENT_ = "Segment Variable" Type = "%sysfunc(sasmsg(sashelp.dmine, rpt_type_vlabel,         NOQUOTE))" _X_ =
13989     "%sysfunc(sasmsg(sashelp.dmine, rpt_numValue_vlabel, NOQUOTE))" _XLABEL_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_fmtValue_vlabel ,    NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel,        NOQUOTE))" PERCENT =
13990     "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel,      NOQUOTE))";
13991  dsid = open("WORK.TEMPFREQ");
13992  varnum = varnum(dsid, 'ROWVARIABLE');
13993  freqnum = varnum(dsid, 'FREQUENCY');
13994  pvarnum = varnum(dsid, 'PERCENT');
13995  typenum = varnum(dsid, '_TYPE_');
13996  bynum = varnum(dsid, "_SEGMENT_");
13997  length varformat _VARIABLE_ $32 _XLABEL_ $32 TYPE $1;
13998  do while(^fetch(dsid));
13999  count = getvarn(dsid, freqnum);
14000  percent = getvarn(dsid, pvarnum);
14001  _VARIABLE_ = strip(getvarc(dsid, varnum));
14002  varblnum = varnum(dsid, _VARIABLE_);
14003  _SEGMENT_ = getvarn(dsid, bynum);
14004  type = vartype(dsid, varblnum);
14005  varformat = varfmt(dsid, varblnum);
14006  if varformat eq '' then varformat = 'best12.';
14007  _X_=.;
14008  if type = 'N' then do;
14009  _X_ = getvarn(dsid, varblnum);
14010  _XLABEL_ = left(putn(_X_, varformat));
14011  end;
14012  else _XLABEL_ = getvarc(dsid, varblnum);
14013  if getvarc(dsid, typenum) = '11' then output;
14014  end;
14015  dsid = close(dsid);
14016  run;

NOTE: The data set EMWS4.CLUS_PROFILE has 188 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
      

14017  proc sort data=EMWS4.Clus_PROFILE NOTHREADS;
14018  by _VARIABLE_ _SEGMENT_;
14019  run;

NOTE: There were 188 observations read from the data set EMWS4.CLUS_PROFILE.
NOTE: The data set EMWS4.CLUS_PROFILE has 188 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14020  proc means data=EMWS4.Clus_PROFILE noprint missing NWAY;
14021  class _VARIABLE_ _SEGMENT_;
14022  var COUNT;
14023  output out=WORK.Clus_STATCOUNT(keep=_SEGMENT_ _VARIABLE_ SUM) SUM=SUM;
14024  run;

NOTE: There were 188 observations read from the data set EMWS4.CLUS_PROFILE.
NOTE: The data set WORK.CLUS_STATCOUNT has 32 observations and 3 variables.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
      

14025  proc sort data=WORK.Clus_STATCOUNT NOTHREADS;
14026  by _VARIABLE_ _SEGMENT_;
14027  run;

NOTE: There were 32 observations read from the data set WORK.CLUS_STATCOUNT.
NOTE: The data set WORK.CLUS_STATCOUNT has 32 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

14028  data EMWS4.Clus_PROFILE(drop=SUM);
14029  label BYPERCENT= "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel, NOQUOTE, _SEGMENT_))";
14030  merge EMWS4.Clus_PROFILE WORK.Clus_STATCOUNT;
14031  by _VARIABLE_ _SEGMENT_;
14032  if SUM ne . then BYPERCENT = 100*COUNT/SUM;
14033  run;

NOTE: There were 188 observations read from the data set EMWS4.CLUS_PROFILE.
NOTE: There were 32 observations read from the data set WORK.CLUS_STATCOUNT.
NOTE: The data set EMWS4.CLUS_PROFILE has 188 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

14034  proc sort data=EMWS4.Clus_PROFILE NOTHREADS;
14035  by _VARIABLE_;
14036  run;

NOTE: There were 188 observations read from the data set EMWS4.CLUS_PROFILE.
NOTE: The data set EMWS4.CLUS_PROFILE has 188 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14037  proc sort data=WORK.M22G_S91;
14038  by Name;
14039  run;

NOTE: There were 17 observations read from the data set WORK.M22G_S91.
NOTE: The data set WORK.M22G_S91 has 17 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

14040  data EMWS4.Clus_PROFILE;
14041  merge EMWS4.Clus_PROFILE(in=_a) WORK.M22G_S91(keep=Name Label Role rename=(Name=_Variable_ Label=_Label_));
14042  by _Variable_;
14043  label Role = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel ,  NOQUOTE))";
14044  label Label = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel , NOQUOTE))";
14045  if _a then output;
14046  run;

NOTE: Variable Label is uninitialized.
WARNING: Multiple lengths were specified for the BY variable _VARIABLE_ by input data sets. This might cause unexpected results.
NOTE: There were 188 observations read from the data set EMWS4.CLUS_PROFILE.
NOTE: There were 17 observations read from the data set WORK.M22G_S91.
NOTE: The data set EMWS4.CLUS_PROFILE has 188 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

14047  proc sort data=EMWS4.Clus_PROFILE;
14048  by _SEGMENT_ _VARIABLE_ _X_;
14049  run;

NOTE: There were 188 observations read from the data set EMWS4.CLUS_PROFILE.
NOTE: The data set EMWS4.CLUS_PROFILE has 188 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14050  data EMWS4.Clus_PROFILE(rename=(_VARIABLE_=Variable _X_=NumericValue _XLABEL_=FmtValue));
14051  set EMWS4.Clus_PROFILE;
14052  retain orderedValue 0;
14053  label OrderedValue = "%sysfunc(sasmsg(sashelp.dmine, rpt_OrderedValue_vlabel, NOQUOTE))";
14054  by _SEGMENT_ _VARIABLE_;
14055  if first._variable_ then orderedValue=1;
14056  else orderedValue+1;
14057  run;

NOTE: There were 188 observations read from the data set EMWS4.CLUS_PROFILE.
NOTE: The data set EMWS4.CLUS_PROFILE has 188 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

14058  data WORK.Clus_temp;
14059  set EMWS4.Clus_OUTMEAN;
14060  _idvar_=left(put(_SEGMENT_,4.));
14061  run;

NOTE: There were 2 observations read from the data set EMWS4.CLUS_OUTMEAN.
NOTE: The data set WORK.CLUS_TEMP has 2 observations and 61 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14062  proc distance data=WORK.Clus_temp out=EMWS4.Clus_DISTANCE method=l(2) shape=square;
14063  id _idvar_;
14064  var interval(%dmvqvars);
14065  run;

NOTE: The data set EMWS4.CLUS_DISTANCE has 2 observations and 3 variables.
NOTE: PROCEDURE DISTANCE used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
      

14066  proc datasets lib=EMWS4 nolist;
14067  modify Clus_DISTANCE;
14068  rename _idvar_=_SEGMENT_;
NOTE: Renaming variable _idvar_ to _SEGMENT_.
14069  run;

NOTE: MODIFY was successful for EMWS4.CLUS_DISTANCE.DATA.
14070  quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

14071  *------------------------------------------------------------*;
14072  * Clus: Creating data set for Input Mean report;
14073  *------------------------------------------------------------*;
14074  data temp(drop=_type_ over_all);
14075  set EMWS4.Clus_OUTSTAT;
14076  where _type_ in('DMDB_MEAN', 'CLUS_MEAN');
14077  run;

NOTE: There were 3 observations read from the data set EMWS4.CLUS_OUTSTAT.
      WHERE _type_ in ('CLUS_MEAN', 'DMDB_MEAN');
NOTE: The data set WORK.TEMP has 3 observations and 52 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14078  proc sort data=temp;
14079  by _SEGMENT_;
14080  run;

NOTE: There were 3 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 3 observations and 52 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

14081  proc stdize data=temp out=stdtemp pctlpts=0 100 outstat=stat;
14082  var AffluenceGrade--REP_RegionU;
14083  run;

NOTE: There were 3 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.STDTEMP has 3 observations and 52 variables.
NOTE: The data set WORK.STAT has 10 observations and 52 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14084  proc transpose data=stat out=tstat(rename=(COL1=MEAN COL2=STD COL3=MIN COL4=MAX));
14085  where _type_ in ('LOCATION', 'SCALE','P0', 'P100');
14086  run;

NOTE: There were 4 observations read from the data set WORK.STAT.
      WHERE _type_ in ('LOCATION', 'P0', 'P100', 'SCALE');
NOTE: The data set WORK.TSTAT has 51 observations and 6 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14087  data tstat( rename=(_NAME_=NAME) keep=_NAME_ cv stdmin stdmax);
14088  set tstat;
14089  if std ^in (0, .) then do;
14090  stdmin = abs((min-mean)/std);
14091  stdmax = abs((max-mean)/std);
14092  end;
14093  if mean ^in(0, .) then cv = std/mean;
14094  run;

NOTE: There were 51 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 51 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

14095  proc sort data=tstat;
14096  by NAME;
14097  run;

NOTE: There were 51 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 51 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

14098  proc transpose data=stdtemp out=tstdtemp(rename=(_NAME_=NAME _LABEL_=LABEL COL1=MEAN));
14099  by _SEGMENT_;
14100  run;

NOTE: There were 3 observations read from the data set WORK.STDTEMP.
NOTE: The data set WORK.TSTDTEMP has 153 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

14101  proc sort data=tstdtemp;
14102  by NAME;
14103  run;

NOTE: There were 153 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set WORK.TSTDTEMP has 153 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

14104  data tstdtemp;
14105  merge tstdtemp tstat;
14106  by NAME;
14107  STDMEAN = (MEAN + stdmin)/(stdmin + stdmax);
14108  drop stdmin stdmax mean;
14109  run;

NOTE: There were 153 observations read from the data set WORK.TSTDTEMP.
NOTE: There were 51 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTDTEMP has 153 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

14110  proc transpose data=EMWS4.Clus_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME VARIABLE=INPUT));
14111  var AffluenceGrade--REP_RegionU;
14112  id _type_;
14113  where _type_ = 'VARIABLE';
14114  run;

NOTE: There were 1 observations read from the data set EMWS4.CLUS_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 51 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

14115  proc sort data=tempVar;
14116  by NAME;
14117  run;

NOTE: There were 51 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 51 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14118  data EMWS4.Clus_INPUTMEAN(rename=(NAME=VARIABLE));
14119  Length _SEGMENT_CHAR_ $7;
14120  label _SEGMENT_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentName_vlabel,  NOQUOTE))" _SEGMENT_CHAR_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentId_vlabel,    NOQUOTE))" NAME = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel,     NOQUOTE))"
14120! INPUT =
14121     "%sysfunc(sasmsg(sashelp.dmine, rpt_input_vlabel,        NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, rpt_label_vlabel,        NOQUOTE))" CV = "%sysfunc(sasmsg(sashelp.dmine, rpt_cv_vlabel,           NOQUOTE))" STDMEAN =
14122     "%sysfunc(sasmsg(sashelp.dmine, rpt_normmean_vlabel,     NOQUOTE))";
14123  merge tempvar tstdtemp;
14124  by NAME;
14125  if LABEL='' then LABEL=NAME;
14126  _SEGMENT_CHAR_ = strip(put(_SEGMENT_, best.));
14127  if _SEGMENT_ = . then _SEGMENT_CHAR_='Overall';
14128  run;

NOTE: There were 51 observations read from the data set WORK.TEMPVAR.
NOTE: There were 153 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set EMWS4.CLUS_INPUTMEAN has 153 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
      

14129  proc sort data=EMWS4.Clus_INPUTMEAN;
14130  by descending cv;
14131  run;

NOTE: There were 153 observations read from the data set EMWS4.CLUS_INPUTMEAN.
NOTE: The data set EMWS4.CLUS_INPUTMEAN has 153 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14132  *------------------------------------------------------------*;
14133  * Clus: Determining the important variables;
14134  *------------------------------------------------------------*;

14135  %let _nobs = 0;
14136  data keepvars(rename=(NAME=INPUT));
14137  set EMWS4.Clus_OUTIMPORT(where=(IMPORTANCE>0.5)) end=eof;
14138  if eof then call symput('_nobs', strip(put(_N_, best.)));
14139  run;

NOTE: There were 6 observations read from the data set EMWS4.CLUS_OUTIMPORT.
      WHERE IMPORTANCE>0.5;
NOTE: The data set WORK.KEEPVARS has 6 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

14140  proc transpose data=EMWS4.Clus_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME VARIABLE=INPUT));
14141  var AffluenceGrade--REP_RegionU;
14142  id _type_;
14143  where _type_ = 'VARIABLE';
14144  run;

NOTE: There were 1 observations read from the data set EMWS4.CLUS_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 51 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

14145  proc sort data=keepvars;
14146  by INPUT;
14147  run;

NOTE: There were 6 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.KEEPVARS has 6 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14148  proc sort data=tempvar;
14149  by INPUT;
14150  run;

NOTE: There were 51 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 51 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14151  data vars;
14152  merge tempvar keepvars(in=b);
14153  by INPUT;
14154  if b then output;
14155  run;

WARNING: Multiple lengths were specified for the BY variable INPUT by input data sets. This might cause unexpected results.
NOTE: There were 51 observations read from the data set WORK.TEMPVAR.
NOTE: There were 6 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.VARS has 9 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14156  proc sort data=vars;
14157  by descending importance;
14158  run;

NOTE: There were 9 observations read from the data set WORK.VARS.
NOTE: The data set WORK.VARS has 9 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14159  data _null_;
14160  set vars;
14161  if _N_=1 then call symput('CLUS_PROFVARS', strip(NAME));
14162  else call symput('CLUS_PROFVARS',symget('CLUS_PROFVARS')!!' '!!strip(NAME));
14163  run;

NOTE: There were 9 observations read from the data set WORK.VARS.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

14164  *------------------------------------------------------------*;
14165  * mergeVarMeansandClusLabel;
14166  *------------------------------------------------------------*;
14167  data temp(keep=_SEGMENT_ &CLUS_PROFVARS);
14168  length _SEGMENT_ &CLUS_PROFVARS 8;
14169  set EMWS4.Clus_OUTSTAT;
14170  where _type_ ='CLUS_MEAN';
14171  run;

NOTE: There were 2 observations read from the data set EMWS4.CLUS_OUTSTAT.
      WHERE _type_='CLUS_MEAN';
NOTE: The data set WORK.TEMP has 2 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14172  proc sort data=temp;
14173  by _SEGMENT_;
14174  run;

NOTE: There were 2 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 2 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

14175  data EMWS4.Clus_LABEL;
14176  merge EMWS4.Clus_LABEL(keep=_SEGMENT_ LABEL) temp;
14177  by _SEGMENT_;
14178  run;

NOTE: There were 2 observations read from the data set EMWS4.CLUS_LABEL.
NOTE: There were 2 observations read from the data set WORK.TEMP.
NOTE: The data set EMWS4.CLUS_LABEL has 2 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

