*------------------------------------------------------------*
* Report Log
Date:                May 09, 2018
Time:                14:43:12
*------------------------------------------------------------*
12236  data WORK.M2O_FGLJ;
12237  set WORK.M2O_FGLJ;
12238  if role eq 'REJECTED' then role = 'INPUT';
12239  run;

NOTE: There were 7 observations read from the data set WORK.M2O_FGLJ.
NOTE: The data set WORK.M2O_FGLJ has 7 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12240  data WORK.M2O_FGLJ;
12241  set WORK.M2O_FGLJ end=_eof_ nobs=_nobs_;
12242  output;
12243  if _eof_ then do;
12244  name = '_SEGMENT_';
12245  ROLE = 'TARGET';
12246  LEVEL = 'NOMINAL';
12247  LABEL = 'Segment Variable';
12248  TYPE = 'N';
12249  FORMAT = '';
12250  INFORMAT = '';
12251  USE='Y';
12252  output;
12253  end;
12254  run;

NOTE: There were 7 observations read from the data set WORK.M2O_FGLJ.
NOTE: The data set WORK.M2O_FGLJ has 8 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12255  *------------------------------------------------------------*;
12256  * Clus: Create decision matrix;
12257  *------------------------------------------------------------*;
12258  *------------------------------------------------------------* ;
12259  * Clus: Tree Variables Macro ;
12260  *------------------------------------------------------------* ;
12261  %macro EM_TREEVARS;
12262      AffluenceGrade FacebookLike LoyaltyClass NightRepairProducts REP_Age
12263     REP_Gender TimeSinceLastPurchase
12264  %mend EM_TREEVARS;
12265  *------------------------------------------------------------* ;
12266  * Clus: Tree Targets Macro ;
12267  *------------------------------------------------------------* ;
12268  %macro EM_TREETARGETS;
12269      _SEGMENT_
12270  %mend EM_TREETARGETS;
12271  data EMWS1.EM_Clus / view=EMWS1.EM_Clus;
12272  set EMWS1.Clus_TRAIN(keep=%EM_TREEVARS %EM_TREETARGETS);
12273  run;

NOTE: DATA STEP view saved on file EMWS1.EM_CLUS.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.20 seconds
      cpu time            0.20 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.21 seconds
      cpu time            0.23 seconds
      

12274  *------------------------------------------------------------* ;
12275  * Clus: Interval Inputs Macro ;
12276  *------------------------------------------------------------* ;
12277  %macro INTINPUTS;
12278      AffluenceGrade NightRepairProducts REP_Age TimeSinceLastPurchase
12279  %mend INTINPUTS;
12280  *------------------------------------------------------------* ;
12281  * Clus: Binary and Nominal Inputs Macro ;
12282  *------------------------------------------------------------* ;
12283  %macro NOMINPUTS;
12284      FacebookLike LoyaltyClass REP_Gender
12285  %mend NOMINPUTS;
12286  *------------------------------------------------------------* ;
12287  * Clus: Ordinal Inputs Macro ;
12288  *------------------------------------------------------------* ;
12289  %macro ORDINPUTS;
12290  
12291  %mend ORDINPUTS;
12292  *------------------------------------------------------------*;
12293  * Clus: Run ARBOR procedure;
12294  *------------------------------------------------------------*;

12295  proc arbor data=EMWS1.EM_Clus
12296  MAXSURRS=5
12297  ;
12298  ;
12299  input %INTINPUTS
12300  / level = interval;
12301  input %NOMINPUTS
12302  / level=nominal;
12303  target _SEGMENT_ / level=NOMINAL
12304  Criterion=PROBCHISQ
12305  ;
12306  ;
12307  Performance DISK
12308  ;
12309  MAKEMACRO NLEAVES=nleaves;
NOTE: 1385538 kilobytes of physical memory.
NOTE: Will use 4224 out of 4224 training cases.
NOTE: Using memory pool with 100163584 bytes.
NOTE: Will not search for split on variable FacebookLike.
NOTE: Acceptable cases have the same value.
NOTE: Option MINCATSIZE=5 may apply.
NOTE: Passed training data 18 times.
NOTE: Training used 886928 bytes of work memory.
NOTE: The subtree sequence contains 21 subtrees. The largest has 41 nodes and 21 leaves.
NOTE: Using subtree with 35 nodes and 18 leaves.
NOTE: Created macro variable NLEAVES equal to 18.
12310  save
12311  MODEL=EMWS1.Clus_PLOTDS
12312  SEQUENCE=EMWS1.Clus_OUTSEQ
12313  IMPORTANCE=EMWS1.Clus_OUTIMPORT
12314  NODESTAT=EMWS1.Clus_OUTNODES
12315  SUMMARY=WORK.OUTSUMMARY_TREE_3Q_FKYZ
12316  STATSBYNODE=WORK.OUTSTATS_TREE_3Q_FKYZ
12317  Pathlistnonmissing = WORK.OUTPATH_TREE_3Q_FKYZ
12318  Rules = WORK.OUTRULES_TREE_3Q_FKYZ
12319  ;
NOTE: The data set EMWS1.CLUS_OUTIMPORT has 7 observations and 5 variables.
NOTE: The data set EMWS1.CLUS_PLOTDS has 1324 observations and 4 variables.
NOTE: The data set EMWS1.CLUS_OUTNODES has 35 observations and 24 variables.
NOTE: The data set WORK.OUTPATH_TREE_3Q_FKYZ has 149 observations and 7 variables.
NOTE: The data set WORK.OUTRULES_TREE_3Q_FKYZ has 343 observations and 6 variables.
NOTE: The data set EMWS1.CLUS_OUTSEQ has 21 observations and 11 variables.
NOTE: The data set WORK.OUTSTATS_TREE_3Q_FKYZ has 210 observations and 5 variables.
NOTE: The data set WORK.OUTSUMMARY_TREE_3Q_FKYZ has 20 observations and 7 variables.
12320  run;

12321  quit;

NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS1.IDS2_DATA.
NOTE: There were 23000 observations read from the data set EMWS1.REPL_TRAIN.
NOTE: There were 4224 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: View EMWS1.EM_CLUS.VIEW used (Total process time):
      real time           0.89 seconds
      cpu time            0.86 seconds
      
NOTE: There were 4224 observations read from the data set EMWS1.CLUS_TRAIN.
NOTE: There were 4224 observations read from the data set EMWS1.EM_CLUS.
NOTE: The data set WORK._NAMEDAT has 4 observations and 5 variables.
NOTE: PROCEDURE ARBOR used (Total process time):
      real time           0.90 seconds
      cpu time            0.87 seconds
      

12322  data EMWS1.Clus_OUTIMPORT;
12323  set EMWS1.Clus_OUTIMPORT;
12324  label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel, noquote))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, noquote))" NRULES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nrules_vlabel, noquote))" IMPORTANCE =
12325     "%sysfunc(sasmsg(sashelp.dmine, rpt_importance_vlabel, noquote))" NSURROGATES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nsurrogates_vlabel, noquote))"
12326  ;
12327  run;

NOTE: There were 7 observations read from the data set EMWS1.CLUS_OUTIMPORT.
NOTE: The data set EMWS1.CLUS_OUTIMPORT has 7 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

12328  filename x "D:\Nida\Data mining\datamining\BOGO\Workspaces\EMWS1\Clus\ENGLISHRULES.txt" encoding='utf-8' NOBOM;

12329  data temp;
12330  length varname $21;
12331  retain varname;
12332  set WORK.OUTPATH_TREE_3Q_FKYZ;
12333  if ^missing(variable) then varname=variable;
12334  else if ^missing(var_name) then varname=var_name;
12335  output;
12336  run;

NOTE: There were 149 observations read from the data set WORK.OUTPATH_TREE_3Q_FKYZ.
NOTE: The data set WORK.TEMP has 149 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12337  proc sort data=temp;
12338  by node;
12339  run;

NOTE: There were 149 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 149 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

12340  proc sort data=EMWS1.Clus_OUTNODES out=outnodes;
12341  by node;
12342  run;

NOTE: There were 35 observations read from the data set EMWS1.CLUS_OUTNODES.
NOTE: The data set WORK.OUTNODES has 35 observations and 24 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

12343  data temp;
12344  merge temp(in=_a) outnodes(keep= node
12345  NPRIORS
12346  P__SEGMENT_2
12347  P__SEGMENT_3
12348  P__SEGMENT_4
12349  P__SEGMENT_1
12350  );
12351  by node;
12352  if _a;
12353  run;

NOTE: There were 149 observations read from the data set WORK.TEMP.
NOTE: There were 35 observations read from the data set WORK.OUTNODES.
NOTE: The data set WORK.TEMP has 149 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12354  proc sort data=temp;
12355  by node descending varname descending numeric_value;
12356  run;

NOTE: There were 149 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 149 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12357  data _null_;
12358  file x;
12359  set temp;
12360  by node descending varname;
12361  retain origvar oldnode string;
12362  length origvar $32 oldnode 8 string $200;
12363  if _n_ = 1 then do;
12364  origvar = varname;
12365  oldnode = node;
12366  end;
12367  if first.node then do;
12368  put "&EM_CODEBAR";
12369  put " Node = " node;
12370  put "&EM_CODEBAR";
12371  end;
12372  if first.varname then do;
12373  if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
12374  if MISSING(CHARACTER_VALUE) then do;
12375  if NUMERIC_VALUE ne . then do;
12376  if ^first.node then do;
12377  string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12378  end;
12379  else do;
12380  string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12381  end;
12382  end;
12383  end;
12384  else do;
12385  if ^first.node then do;
12386  string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12387  end;
12388  else do;
12389  string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12390  end;
12391  end;
12392  end;
12393  else if RELATION in ("=") then do;
12394  if ^first.node then do;
12395  string = "AND "||strip(varname) ||" IS ONE OF: "||character_value;
12396  end;
12397  else do;
12398  string = "if "|| strip(varname) ||" IS ONE OF: "||character_value;
12399  end;
12400  end;
12401  else if RELATION in ("ISMISSING") then do;
12402  if ^first.node then do;
12403  string = " AND "|| strip(varname) || " equals Missing";
12404  end;
12405  else do;
12406  string = "if "|| strip(varname) ||" equals Missing";
12407  end;
12408  end;
12409  else if RELATION in ("ISNOTMISSING") then do;
12410  if ^first.node then do;
12411  string = " AND "|| strip(varname) || " equals All Values";
12412  end;
12413  else do;
12414  string = "if "|| strip(varname) ||" equals All Values";
12415  end;
12416  end;
12417  if ^missing(varname) then origvar = varname;
12418  oldnode=node;
12419  end;
12420  else do;
12421  if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
12422  if MISSING(CHARACTER_VALUE) then do;
12423  if NUMERIC_VALUE ne . then do;
12424  if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12425  else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12426  end;
12427  end;
12428  else do;
12429  if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12430  else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12431  end;
12432  end;
12433  else if RELATION in ("=") then do;
12434  string = strip(string)||", "||strip(character_value);
12435  end;
12436  else if RELATION in ("ISMISSING") then do;
12437  end;
12438  if ^missing(varname) then origvar = varname;
12439  oldnode=node;
12440  end;
12441  if last.varname then do;
12442  if RELATION in ("ISMISSING") then do;
12443  if ^first.varname then do;
12444  string = strip(string) || " or MISSING";
12445  end;
12446  end;
12447  put string;
12448  if ^missing(varname) then origvar = varname;
12449  oldnode=node;
12450  end;
12451  if last.node then do;
12452  put "then ";
12453  put " Tree Node Identifier   = " node;
12454  put " Number of Observations = " NPRIORS;
12455  put " Predicted: _SEGMENT_=2  = " P__SEGMENT_2;
12456  put " Predicted: _SEGMENT_=3  = " P__SEGMENT_3;
12457  put " Predicted: _SEGMENT_=4  = " P__SEGMENT_4;
12458  put " Predicted: _SEGMENT_=1  = " P__SEGMENT_1;
12459  put " ";
12460  if ^missing(varname) then origvar = varname;
12461  oldnode=node;
12462  end;
12463  run;

NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      12377:67    12380:66    12424:108   12425:72    
NOTE: The file X is:
      Filename=D:\Nida\Data mining\datamining\BOGO\Workspaces\EMWS1\Clus\ENGLISHRULES.txt,
      RECFM=V,LRECL=131068,File Size (bytes)=0,
      Last Modified=09May2018:14:43:13,
      Create Time=09May2018:14:43:13

NOTE: 265 records were written to the file X.
      The minimum record length was 1.
      The maximum record length was 65.
NOTE: There were 149 observations read from the data set WORK.TEMP.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12464  filename x;
NOTE: Fileref X has been deassigned.

12465  /* belowtext */
12466  data templabel;
12467  set WORK.OUTRULES_TREE_3Q_FKYZ;
12468  if ((ROLE="PRIMARY") AND (STAT ="LABEL"));
12469  rename character_value = belowtext;
12470  keep NODE character_value;
12471  run;

NOTE: There were 343 observations read from the data set WORK.OUTRULES_TREE_3Q_FKYZ.
NOTE: The data set WORK.TEMPLABEL has 6 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12472  data tempvar;
12473  set WORK.OUTRULES_TREE_3Q_FKYZ;
12474  if ((ROLE="PRIMARY") AND (STAT="VARIABLE"));
12475  keep NODE character_value;
12476  run;

NOTE: There were 343 observations read from the data set WORK.OUTRULES_TREE_3Q_FKYZ.
NOTE: The data set WORK.TEMPVAR has 17 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12477  proc sort data=templabel;
12478  by node;
12479  run;

NOTE: There were 6 observations read from the data set WORK.TEMPLABEL.
NOTE: The data set WORK.TEMPLABEL has 6 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

12480  proc sort data=tempvar;
12481  by node;
12482  run;

NOTE: There were 17 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 17 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12483  data tempbelow;
12484  merge templabel tempvar;
12485  by node;
12486  if missing(belowtext) then belowtext= character_value;
12487  keep node belowtext;
12488  run;

NOTE: There were 6 observations read from the data set WORK.TEMPLABEL.
NOTE: There were 17 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPBELOW has 17 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12489  proc sort data=tempbelow;
12490  by node;
12491  run;

NOTE: There were 17 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.TEMPBELOW has 17 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

12492  /* abovetext */
12493  data tempoutrules;
12494  set WORK.OUTRULES_TREE_3Q_FKYZ;
12495  if ((ROLE='PRIMARY') AND(STAT in ("INTERVAL", "ORDINAL", "NOMINAL")));
12496  run;

NOTE: There were 343 observations read from the data set WORK.OUTRULES_TREE_3Q_FKYZ.
NOTE: The data set WORK.TEMPOUTRULES has 19 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12497  proc sort data=tempoutrules;
12498  by node numeric_value;
12499  run;

NOTE: There were 19 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPOUTRULES has 19 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12500  data tempabove;
12501  set tempoutrules(rename=(node=parent));
12502  by parent numeric_value;
12503  retain abovetext tempstring flag branch origval origchar;
12504  *length abovetext tempstring origchar $45;
12505  length abovetext $256;
12506  length tempstring origchar $64;
12507  if STAT in ("INTERVAL", "ORDINAL") then do;
12508  if first.parent then do;
12509  if missing(character_value) then do;
12510  numeric_value = round(numeric_value, 0.0001);
12511  abovetext = "< "||strip(NUMERIC_VALUE);
12512  branch = 1;
12513  origval = numeric_value;
12514  output;
12515  end;
12516  else do;
12517  abovetext = "< "||strip(CHARACTER_VALUE);
12518  branch = 1;
12519  origchar = character_value;
12520  output;
12521  end;
12522  if first.parent AND last.parent then do;
12523  if missing(character_value) then do;
12524  numeric_value = round(numeric_value, 0.0001);
12525  branch = branch + 1;
12526  abovetext = ">= "||strip(NUMERIC_VALUE);
12527  output;
12528  end;
12529  else do;
12530  branch = branch + 1;
12531  abovetext = ">= "||strip(CHARACTER_VALUE);
12532  output;
12533  end;
12534  end;
12535  end;
12536  else if last.parent then do;
12537  if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
12538  if missing(character_value) then do;
12539  numeric_value = round(numeric_value, 0.0001);
12540  abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
12541  end;
12542  else do;
12543  abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
12544  end;
12545  branch = branch + 1;
12546  output;
12547  if missing(character_value) then do;
12548  numeric_value = round(numeric_value, 0.0001);
12549  abovetext = ">= "||strip(NUMERIC_VALUE);
12550  end;
12551  else do;
12552  abovetext = ">= "||strip(CHARACTER_VALUE);
12553  end;
12554  branch = branch + 1;
12555  output;
12556  end;
12557  else do;
12558  if missing(character_value) then do;
12559  numeric_value = round(numeric_value, 0.0001);
12560  abovetext = ">= "||strip(NUMERIC_VALUE);
12561  end;
12562  else do;
12563  abovetext = ">= "||strip(CHARACTER_VALUE);
12564  end;
12565  branch = branch + 1;
12566  output;
12567  end;
12568  end;
12569  else do;
12570  if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
12571  if missing(character_value) then do;
12572  numeric_value = round(numeric_value,0.0001);
12573  abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
12574  origval = numeric_value;
12575  end;
12576  else do;
12577  abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
12578  origchar = character_value;
12579  end;
12580  branch = branch + 1;
12581  output;
12582  end;
12583  else do;
12584  if missing(character_value) then do;
12585  numeric_value = round(numeric_value, 0.0001);
12586  abovetext = ">= "||strip(NUMERIC_VALUE);
12587  origval = numeric_value;
12588  end;
12589  else do;
12590  abovetext = ">= "||strip(CHARACTER_VALUE);
12591  origval = character_value;
12592  end;
12593  branch = branch + 1;
12594  output;
12595  end;
12596  end;
12597  end;
12598  else do;
12599  if first.numeric_value then do;
12600  flag = 0;
12601  abovetext = CHARACTER_VALUE;
12602  branch = numeric_value;
12603  if first.numeric_value AND last.numeric_value then do;
12604  output;
12605  end;
12606  end;
12607  else if last.numeric_value then do;
12608  if flag=0 then do;
12609  tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
12610  length = length(strip(tempstring));
12611  if length < 32 then do;
12612  abovetext = strip(tempstring);
12613  end;
12614  else do;
12615  abovetext = strip(abovetext)||", ...";
12616  flag = 1;
12617  end;
12618  end;
12619  branch = numeric_value;
12620  output;
12621  end;
12622  else do;
12623  if flag=0 then do;
12624  tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
12625  length = length(strip(tempstring));
12626  if length < 32 then do;
12627  abovetext = strip(tempstring);
12628  end;
12629  else do;
12630  abovetext = strip(abovetext)||", ...";
12631  flag=1;
12632  end;
12633  end;
12634  branch = numeric_value;
12635  end;
12636  end;
12637  keep parent branch abovetext;
12638  run;

NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      12511:25   12526:26   12540:24   12540:47   12549:26   12560:26   12573:24   12573:47   12586:26   
NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      12591:11   
NOTE: There were 19 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPABOVE has 34 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

12639  /* MIssing value to abovetext */
12640  data tempmissing;
12641  set WORK.OUTRULES_TREE_3Q_FKYZ;
12642  if ((ROLE="PRIMARY") AND (STAT in ("MISSING")));
12643  rename node=parent numeric_value=branch character_value=misschar;
12644  run;

NOTE: There were 343 observations read from the data set WORK.OUTRULES_TREE_3Q_FKYZ.
NOTE: The data set WORK.TEMPMISSING has 17 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12645  proc sort data=work.tempabove;
12646  by parent branch;
12647  run;

NOTE: There were 34 observations read from the data set WORK.TEMPABOVE.
NOTE: The data set WORK.TEMPABOVE has 34 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12648  proc sort data=EMWS1.Clus_OUTNODES out=tempoutnodes;
12649  by parent branch;
12650  run;

NOTE: There were 35 observations read from the data set EMWS1.CLUS_OUTNODES.
NOTE: The data set WORK.TEMPOUTNODES has 35 observations and 24 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12651  proc sort data=tempmissing;
12652  by parent branch;
12653  run;

NOTE: There were 17 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.TEMPMISSING has 17 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12654  data WORK.Clus_outnodes;
12655  merge work.tempabove tempoutNodes(drop=abovetext ) tempmissing(in=_a);
12656  by parent branch;
12657  length traintotal validtotal 8;
12658  retain traintotal validtotal;
12659  if _a then do;
12660  if ^MISSING(abovetext) then do;
12661  abovetext= strip(abovetext)||" %sysfunc(sasmsg(sashelp.dmine, tree_ormiss_vlabel, noquote))";
12662  end;
12663  else do;
12664  abovetext = " %sysfunc(sasmsg(sashelp.dmine, tree_missonly_vlabel, noquote))";
12665  end;
12666  end;
12667  if MISSING(abovetext) then abovetext="%sysfunc(sasmsg(sashelp.dmine, tree_nonmiss_vlabel, noquote))";
12668  if node=1 then do;
12669  traintotal = N;
12670  validtotal=VN;
12671  end;
12672  label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
12673  drop role rank stat misschar belowtext;
12674  run;

NOTE: Variable VN is uninitialized.
NOTE: There were 34 observations read from the data set WORK.TEMPABOVE.
NOTE: There were 35 observations read from the data set WORK.TEMPOUTNODES.
NOTE: There were 17 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.CLUS_OUTNODES has 35 observations and 26 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

12675  proc sort data=WORK.Clus_outnodes;
12676  by node;
12677  run;

NOTE: There were 35 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: The data set WORK.CLUS_OUTNODES has 35 observations and 26 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12678  proc sort data=tempbelow;
12679  by node;
12680  run;

NOTE: Input data set is already sorted, no sorting done.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12681  data WORK.Clus_outnodes;
12682  merge WORK.Clus_outnodes tempbelow;
12683  by node;
12684  run;

NOTE: There were 35 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: There were 17 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.CLUS_OUTNODES has 35 observations and 27 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS1.IDS2_DATA.
NOTE: There were 23000 observations read from the data set EMWS1.REPL_TRAIN.
NOTE: There were 4224 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: View EMWS1.EM_CLUS.VIEW used (Total process time):
      real time           0.43 seconds
      cpu time            0.43 seconds
      
NOTE: There were 4224 observations read from the data set EMWS1.CLUS_TRAIN.
12685  data tempoutstats;
12686  set WORK.OUTSTATS_TREE_3Q_FKYZ;
12687  length tarlevel $8;
12688  tarlevel ="NOMINAL";
12689  run;

NOTE: There were 210 observations read from the data set WORK.OUTSTATS_TREE_3Q_FKYZ.
NOTE: The data set WORK.TEMPOUTSTATS has 210 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12690  data EMWS1.Clus_TREE_PLOT;
12691  length NODETEXT TEXTALL $800 N NODECOLOR 8;
12692  set WORK.Clus_outnodes;
12693  label parent = "%sysfunc(sasmsg(sashelp.dmine, rpt_parentID_vlabel, noquote))" depth = "%sysfunc(sasmsg(sashelp.dmine, rpt_depth_vlabel, noquote))" belowtext= "%sysfunc(sasmsg(sashelp.dmine, rpt_belowtext_vlabel, noquote))" abovetext =
12694     "%sysfunc(sasmsg(sashelp.dmine, rpt_abovetext_vlabel, noquote))" linkwidth = "%sysfunc(sasmsg(sashelp.dmine, rpt_linkwidth_vlabel, noquote))" nodetext = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodetext_vlabel, noquote))" textall =
12695     "%sysfunc(sasmsg(sashelp.dmine, rpt_textall_vlabel, noquote))" N = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainn_vlabel, noquote))" nodecolor = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodecolor_vlabel, noquote))" node =
12696     "%sysfunc(sasmsg(sashelp.dmine, rpt_node_vlabel, noquote))";
12697  keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR;
12698  run;

NOTE: Variable TEXTALL is uninitialized.
NOTE: Variable NODECOLOR is uninitialized.
NOTE: There were 35 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 35 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

12699  proc sort data=EMWS1.Clus_TREE_PLOT;
12700  by node;
12701  run;

NOTE: There were 35 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 35 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12702  proc sort data=tempoutstats;
12703  by node;
12704  run;

NOTE: There were 210 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set WORK.TEMPOUTSTATS has 210 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12705  data EMWS1.Clus_TREE_PLOT;
12706  merge EMWS1.Clus_TREE_PLOT tempoutstats;
12707  length text $800 _RASE_ P__SEGMENT_2 8;
12708  retain P__SEGMENT_2 eventlevel;
12709  by node;
12710  if statname='N' then N=statvalue;
12711  if statname='NPRIORS' then N=statvalue;
12712  if statname='PREDICTION' then eventlevel=category;
12713  _RASE_ = .;
12714  if tarlevel ^= 'INTERVAL' then do;
12715  if STATNAME = 'PROBABILITY' then do;
12716  if CATEGORY=EVENTLEVEL then do;
12717  nodetext = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
12718  text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
12719  P__SEGMENT_2 = round(STATVALUE, .01);
12720  end;
12721  else do;
12722  text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
12723  end;
12724  textall = strip(textall)||'0A'x||strip( text);
12725  end;
12726  if last.node then do;
12727  nodetext = trim(nodetext)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
12728  textall = trim(textall)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
12729  output EMWS1.Clus_TREE_PLOT;
12730  end;
12731  end;
12732  else do;
12733  if statname='RASE' then _RASE_=statvalue;
12734  label _RASE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_trase_vlabel, noquote))";
12735  if STATNAME = 'PREDICTION' then do;
12736  nodetext= "%sysfunc(sasmsg(sashelp.dmine, rpt_average_vlabel, noquote))"|| put(STATVALUE, 13.4)||'0A'x|| "%sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
12737  textall = nodetext;
12738  P__SEGMENT_2 = STATVALUE;
12739  ;
12740  ;
12741  end;
12742  if last.node then do;
12743  output EMWS1.Clus_TREE_PLOT;
12744  end;
12745  ;
12746  end;
12747  label P__SEGMENT_2 = "%sysfunc(sasmsg(sashelp.dmine, rpt_predictedvar_vlabel, noquote))";
12748  keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR _RASE_ P__SEGMENT_2;
12749  run;

NOTE: There were 35 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: There were 210 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 35 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

12750  data tempcolor;
12751  set WORK.OUTSTATS_TREE_3Q_FKYZ;
12752  retain eventlevel;
12753  if STATNAME='PREDICTION' then eventlevel=CATEGORY;
12754  run;

NOTE: There were 210 observations read from the data set WORK.OUTSTATS_TREE_3Q_FKYZ.
NOTE: The data set WORK.TEMPCOLOR has 210 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

12755  data tempcolor;
12756  set tempcolor;
12757  if 'NOMINAL' ne 'INTERVAL' then do;
12758  if CATEGORY=EVENTLEVEL AND STATNAME="PROBABILITY";
12759  end;
12760  else do;
12761  if STATNAME="PREDICTION";
12762  end;
12763  run;

NOTE: There were 210 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 35 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12764  data tempcolor;
12765  set tempcolor;
12766  length nodecolor 8;
12767  if 'NOMINAL' ne 'INTERVAL' then do;
12768  nodecolor = round(100*(STATVALUE), .01);
12769  end;
12770  else do;
12771  nodecolor=round(statvalue, .01);
12772  end;
12773  keep node nodecolor;
12774  run;

NOTE: There were 35 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 35 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

12775  proc sort data=EMWS1.Clus_TREE_PLOT;
12776  by node;
12777  run;

NOTE: There were 35 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 35 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

12778  proc sort data=tempcolor;
12779  by node;
12780  run;

NOTE: There were 35 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 35 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

12781  data EMWS1.Clus_TREE_PLOT;
12782  merge EMWS1.Clus_TREE_PLOT tempcolor;
12783  by node;
12784  length traintotal 8;
12785  retain traintotal;
12786  label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
12787  if node=1 then do;
12788  traintotal = N;
12789  end;
12790  if NODE eq . then delete;
12791  run;

NOTE: There were 35 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: There were 35 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 35 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

12792  data EMWS1.Clus_TREE_PLOT;
12793  set EMWS1.Clus_TREE_PLOT;
12794  textall = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodeId_vlabel, noquote, )):"|| put(Node, 13.)||'0A'x||trim(textall);
12795  run;

NOTE: There were 35 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 35 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12796  data tempout;
12797  set WORK.Clus_outnodes;
12798  run;

NOTE: There were 35 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: The data set WORK.TEMPOUT has 35 observations and 27 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12799  proc sort data=tempout;
12800  by descending P__SEGMENT_2;
12801  run;

NOTE: There were 35 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TEMPOUT has 35 observations and 27 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12802  data tree_temp;
12803  set tempout;
12804  if LEAF ne .;
12805  label index="%sysfunc(sasmsg(sashelp.dmine, rpt_leafindex_vlabel  , NOQUOTE))";
12806  label percevent_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_perc_train_vlabel  , NOQUOTE))";
12807  label perc_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_percevent_train_vlabel  , NOQUOTE))";
12808  label tprob="%sysfunc(sasmsg(sashelp.dmine, rpt_prob_vlabel  , NOQUOTE, %nrbquote()))";
12809  tprob = round(P__SEGMENT_2, .01);
12810  percevent_train = round ( tprob*100, .01);
12811  *perc_train =round( ( N / traintotal)*100, .001);
12812  perc_train =round( ( N / traintotal), .01);
12813  if missing(perc_train) then perc_train = round( linkwidth*100, .001);
12814  index = _n_;
12815  keep NODE index tprob perc_train percevent_train
12816  ;
12817  run;

NOTE: There were 35 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TREE_TEMP has 18 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.12 seconds
      cpu time            0.04 seconds
      

12818  proc sort data=tree_temp;
12819  by NODE;
12820  run;

NOTE: There were 18 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set WORK.TREE_TEMP has 18 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

12821  proc sort data=EMWS1.Clus_TREE_PLOT;
12822  by NODE;
12823  run;

NOTE: There were 35 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 35 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12824  data EMWS1.Clus_TREE_PLOT;
12825  merge EMWS1.Clus_TREE_PLOT tree_temp;
12826  by NODE;
12827  run;

NOTE: There were 35 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: There were 18 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 35 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

12828  proc sort data=EMWS1.Clus_TREE_PLOT;
12829  by node index;
12830  run;

NOTE: There were 35 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 35 observations and 17 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12831  title9 ' ';
12832  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_VariableImportance_title, NOQUOTE))";
12833  proc print data=EMWS1.Clus_OUTIMPORT(where=(IMPORTANCE>0)) noobs label;
12834  run;

NOTE: There were 5 observations read from the data set EMWS1.CLUS_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12835  title10;

12836  data WORK.M36YQYK5;
12837  set WORK.M36YQYK5;
12838  if role eq 'REJECTED' then role = 'INPUT';
12839  run;

NOTE: There were 26 observations read from the data set WORK.M36YQYK5.
NOTE: The data set WORK.M36YQYK5 has 26 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12840  proc sort data=EMWS1.Clus_OUTIMPORT out=WORK.Clus_GRAPHVARS(keep=NAME);
12841  where IMPORTANCE>0;
12842  by NAME;
12843  run;

NOTE: There were 5 observations read from the data set EMWS1.CLUS_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The data set WORK.CLUS_GRAPHVARS has 5 observations and 1 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12844  proc sort data = WORK.M36YQYK5;
12845  by NAME;
12846  run;

NOTE: There were 26 observations read from the data set WORK.M36YQYK5.
NOTE: The data set WORK.M36YQYK5 has 26 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12847  data WORK.M36YQYK5;
12848  merge WORK.M36YQYK5 WORK.Clus_GRAPHVARS(in=_b_);
12849  by NAME;
12850  if _b_ or ROLE = "FREQ" or REPORT="Y" then output;
12851  run;

NOTE: There were 26 observations read from the data set WORK.M36YQYK5.
NOTE: There were 5 observations read from the data set WORK.CLUS_GRAPHVARS.
NOTE: The data set WORK.M36YQYK5 has 5 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12852  data WORK.M36YQYK5;
12853  set WORK.M36YQYK5 end=_eof_ nobs=_nobs_;
12854  output;
12855  if _eof_ then do;
12856  name = '_SEGMENT_';
12857  ROLE = 'BY';
12858  LEVEL = 'NOMINAL';
12859  LABEL = 'Segment Variable';
12860  TYPE = 'N';
12861  FORMAT = '';
12862  INFORMAT = '';
12863  output;
12864  end;
12865  run;

NOTE: There were 5 observations read from the data set WORK.M36YQYK5.
NOTE: The data set WORK.M36YQYK5 has 6 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12866  *------------------------------------------------------------* ;
12867  * Clus: STDIZE Variables Macro ;
12868  *------------------------------------------------------------* ;
12869  %macro stdizevar;
12870      AffluenceGrade REP_Age TimeSinceLastPurchase
12871  %mend stdizevar;
12872  *------------------------------------------------------------*;
12873  * Clus: Computing Summary Statistics;
12874  *------------------------------------------------------------*;
12875  proc stdize
12876  data = EMWS1.Clus_TRAIN
12877  out=_null_
12878  outstat=WORK.Clus_STAT
12879  add=0 fuzz=1E-14 initial=MAD
12880  vardef=df
12881  method=STD
12882  mult=1
12883  pctlmtd=ORD_STAT pctldef=2
12884  pctlpts=(
12885  0
12886  100
12887  )
12888  ;
12889  var %stdizevar;
12890  run;

NOTE: INITIAL= will be ignored.
NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS1.IDS2_DATA.
NOTE: There were 23000 observations read from the data set EMWS1.REPL_TRAIN.
NOTE: View EMWS1.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.39 seconds
      cpu time            0.39 seconds
      
NOTE: There were 4224 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: There were 4224 observations read from the data set EMWS1.CLUS_TRAIN.
NOTE: The data set WORK.CLUS_STAT has 10 observations and 4 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.40 seconds
      cpu time            0.40 seconds
      

12891  quit;

12892  data WORK.Clus_MINMAX;
12893  set WORK.Clus_STAT;
12894  where _TYPE_ in('P0','P100');
12895  if _TYPE_='P0' then _TYPE_='MIN';
12896  else if _TYPE_='P100' then _TYPE_='MAX';
12897  run;

NOTE: There were 2 observations read from the data set WORK.CLUS_STAT.
      WHERE _TYPE_ in ('P0', 'P100');
NOTE: The data set WORK.CLUS_MINMAX has 2 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12898  proc transpose data=WORK.Clus_MINMAX out=WORK.Clus_MINMAX(drop=_LABEL_ rename=(_NAME_=_VARIABLE_));
12899  id _TYPE_;
12900  run;

NOTE: There were 2 observations read from the data set WORK.CLUS_MINMAX.
NOTE: The data set WORK.CLUS_MINMAX has 3 observations and 3 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12901  data WORK.Clus_UGRID;
12902  set WORK.Clus_MINMAX;
12903  B1 = MIN + (1-1)*(MAX-MIN)/8;
12904  B2 = MIN + (2-1)*(MAX-MIN)/8;
12905  B3 = MIN + (3-1)*(MAX-MIN)/8;
12906  B4 = MIN + (4-1)*(MAX-MIN)/8;
12907  B5 = MIN + (5-1)*(MAX-MIN)/8;
12908  B6 = MIN + (6-1)*(MAX-MIN)/8;
12909  B7 = MIN + (7-1)*(MAX-MIN)/8;
12910  B8 = MIN + (8-1)*(MAX-MIN)/8;
12911  B9 = MIN + (9-1)*(MAX-MIN)/8;
12912  drop MIN MAX;
12913  run;

NOTE: There were 3 observations read from the data set WORK.CLUS_MINMAX.
NOTE: The data set WORK.CLUS_UGRID has 3 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12914  *------------------------------------------------------------*;
12915  * Clus: Creating formats for binning interval variables;
12916  *------------------------------------------------------------*;
12917  proc format;
12918  value F1_
12919  1-4.5 = "1:4.5"
12920  4.5-8 = "4.5:8"
12921  8-11.5 = "8:11.5"
12922  11.5-15 = "11.5:15"
12923  15-18.5 = "15:18.5"
12924  18.5-22 = "18.5:22"
12925  22-25.5 = "22:25.5"
12926  25.5-29 = "25.5:29"
12927  ;
NOTE: Format F1_ has been output.
12928  value F2_
12929  18-25.625 = "18:25.625"
12930  25.625-33.25 = "25.625:33.25"
12931  33.25-40.875 = "33.25:40.875"
12932  40.875-48.5 = "40.875:48.5"
12933  48.5-56.125 = "48.5:56.125"
12934  56.125-63.75 = "56.125:63.75"
12935  63.75-71.375 = "63.75:71.375"
12936  71.375-79 = "71.375:79"
12937  ;
NOTE: Format F2_ has been output.
12938  value F3_
12939  1-5.125 = "1:5.125"
12940  5.125-9.25 = "5.125:9.25"
12941  9.25-13.375 = "9.25:13.375"
12942  13.375-17.5 = "13.375:17.5"
12943  17.5-21.625 = "17.5:21.625"
12944  21.625-25.75 = "21.625:25.75"
12945  25.75-29.875 = "25.75:29.875"
12946  29.875-34 = "29.875:34"
12947  ;
NOTE: Format F3_ has been output.
12948  run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12949  ods listing close;
12950  ods output crosstabfreqs=WORK.TEMPFREQ;
12951  proc freq data = EMWS1.Clus_TRAIN order=formatted addnames;
12952  table AffluenceGrade * _SEGMENT_ / missing;
12953  table LoyaltyClass * _SEGMENT_ / missing;
12954  table REP_Age * _SEGMENT_ / missing;
12955  table REP_Gender * _SEGMENT_ / missing;
12956  table TimeSinceLastPurchase * _SEGMENT_ / missing;
12957  format AFFLUENCEGRADE F1_.;
12958  format REP_AGE F2_.;
12959  format TIMESINCELASTPURCHASE F3_.;
12960  run;

NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS1.IDS2_DATA.
NOTE: There were 23000 observations read from the data set EMWS1.REPL_TRAIN.
NOTE: View EMWS1.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.46 seconds
      cpu time            0.43 seconds
      
NOTE: There were 4224 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: The data set WORK.TEMPFREQ has 165 observations and 16 variables.
NOTE: There were 4224 observations read from the data set EMWS1.CLUS_TRAIN.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.51 seconds
      cpu time            0.46 seconds
      

12961  quit;
12962  ods listing;
12963  data EMWS1.Clus_PROFILE(keep=_VARIABLE_ _SEGMENT_ TYPE COUNT PERCENT _X_ _XLABEL_);
12964  label _VARIABLE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel, NOQUOTE))" _SEGMENT_ = "Segment Variable" Type = "%sysfunc(sasmsg(sashelp.dmine, rpt_type_vlabel,         NOQUOTE))" _X_ =
12965     "%sysfunc(sasmsg(sashelp.dmine, rpt_numValue_vlabel, NOQUOTE))" _XLABEL_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_fmtValue_vlabel ,    NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel,        NOQUOTE))" PERCENT =
12966     "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel,      NOQUOTE))";
12967  dsid = open("WORK.TEMPFREQ");
12968  varnum = varnum(dsid, 'ROWVARIABLE');
12969  freqnum = varnum(dsid, 'FREQUENCY');
12970  pvarnum = varnum(dsid, 'PERCENT');
12971  typenum = varnum(dsid, '_TYPE_');
12972  bynum = varnum(dsid, "_SEGMENT_");
12973  length varformat _VARIABLE_ $32 _XLABEL_ $32 TYPE $1;
12974  do while(^fetch(dsid));
12975  count = getvarn(dsid, freqnum);
12976  percent = getvarn(dsid, pvarnum);
12977  _VARIABLE_ = strip(getvarc(dsid, varnum));
12978  varblnum = varnum(dsid, _VARIABLE_);
12979  _SEGMENT_ = getvarn(dsid, bynum);
12980  type = vartype(dsid, varblnum);
12981  varformat = varfmt(dsid, varblnum);
12982  if varformat eq '' then varformat = 'best12.';
12983  _X_=.;
12984  if type = 'N' then do;
12985  _X_ = getvarn(dsid, varblnum);
12986  _XLABEL_ = left(putn(_X_, varformat));
12987  end;
12988  else _XLABEL_ = getvarc(dsid, varblnum);
12989  if getvarc(dsid, typenum) = '11' then output;
12990  end;
12991  dsid = close(dsid);
12992  run;

NOTE: The data set EMWS1.CLUS_PROFILE has 112 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
      

12993  proc sort data=EMWS1.Clus_PROFILE NOTHREADS;
12994  by _VARIABLE_ _SEGMENT_;
12995  run;

NOTE: There were 112 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set EMWS1.CLUS_PROFILE has 112 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12996  proc means data=EMWS1.Clus_PROFILE noprint missing NWAY;
12997  class _VARIABLE_ _SEGMENT_;
12998  var COUNT;
12999  output out=WORK.Clus_STATCOUNT(keep=_SEGMENT_ _VARIABLE_ SUM) SUM=SUM;
13000  run;

NOTE: There were 112 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set WORK.CLUS_STATCOUNT has 20 observations and 3 variables.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13001  proc sort data=WORK.Clus_STATCOUNT NOTHREADS;
13002  by _VARIABLE_ _SEGMENT_;
13003  run;

NOTE: There were 20 observations read from the data set WORK.CLUS_STATCOUNT.
NOTE: The data set WORK.CLUS_STATCOUNT has 20 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13004  data EMWS1.Clus_PROFILE(drop=SUM);
13005  label BYPERCENT= "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel, NOQUOTE, _SEGMENT_))";
13006  merge EMWS1.Clus_PROFILE WORK.Clus_STATCOUNT;
13007  by _VARIABLE_ _SEGMENT_;
13008  if SUM ne . then BYPERCENT = 100*COUNT/SUM;
13009  run;

NOTE: There were 112 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: There were 20 observations read from the data set WORK.CLUS_STATCOUNT.
NOTE: The data set EMWS1.CLUS_PROFILE has 112 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13010  proc sort data=EMWS1.Clus_PROFILE NOTHREADS;
13011  by _VARIABLE_;
13012  run;

NOTE: There were 112 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set EMWS1.CLUS_PROFILE has 112 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13013  proc sort data=WORK.M36YQYK5;
13014  by Name;
13015  run;

NOTE: There were 6 observations read from the data set WORK.M36YQYK5.
NOTE: The data set WORK.M36YQYK5 has 6 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13016  data EMWS1.Clus_PROFILE;
13017  merge EMWS1.Clus_PROFILE(in=_a) WORK.M36YQYK5(keep=Name Label Role rename=(Name=_Variable_ Label=_Label_));
13018  by _Variable_;
13019  label Role = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel ,  NOQUOTE))";
13020  label Label = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel , NOQUOTE))";
13021  if _a then output;
13022  run;

NOTE: Variable Label is uninitialized.
WARNING: Multiple lengths were specified for the BY variable _VARIABLE_ by input data sets. This might cause unexpected results.
NOTE: There were 112 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: There were 6 observations read from the data set WORK.M36YQYK5.
NOTE: The data set EMWS1.CLUS_PROFILE has 112 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13023  proc sort data=EMWS1.Clus_PROFILE;
13024  by _SEGMENT_ _VARIABLE_ _X_;
13025  run;

NOTE: There were 112 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set EMWS1.CLUS_PROFILE has 112 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13026  data EMWS1.Clus_PROFILE(rename=(_VARIABLE_=Variable _X_=NumericValue _XLABEL_=FmtValue));
13027  set EMWS1.Clus_PROFILE;
13028  retain orderedValue 0;
13029  label OrderedValue = "%sysfunc(sasmsg(sashelp.dmine, rpt_OrderedValue_vlabel, NOQUOTE))";
13030  by _SEGMENT_ _VARIABLE_;
13031  if first._variable_ then orderedValue=1;
13032  else orderedValue+1;
13033  run;

NOTE: There were 112 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set EMWS1.CLUS_PROFILE has 112 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13034  proc transpose data=EMWS1.Clus_OUTVAR out=WORK.Clus_OUTVAR(where=(COL1 ^in('IMPUTED','OMITTED')));
13035  var AffluenceGrade--REP_GenderM;
13036  where _TYPE_ in('TYPE' 'VARIABLE');
13037  run;

NOTE: There were 2 observations read from the data set EMWS1.CLUS_OUTVAR.
      WHERE _TYPE_ in ('TYPE', 'VARIABLE');
NOTE: The data set WORK.CLUS_OUTVAR has 8 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13038  *------------------------------------------------------------* ;
13039  * Clus: DMVQ Variables;
13040  *------------------------------------------------------------* ;
13041  %macro dmvqvars;
13042      AffluenceGrade NightRepairProducts REP_Age TimeSinceLastPurchase
13043     LoyaltyClassGold LoyaltyClassPlatinum REP_GenderF REP_GenderM
13044  %mend ;
13045  
13046  

13047  data WORK.Clus_temp;
13048  set EMWS1.Clus_OUTMEAN;
13049  _idvar_=left(put(_SEGMENT_,4.));
13050  run;

NOTE: There were 4 observations read from the data set EMWS1.CLUS_OUTMEAN.
NOTE: The data set WORK.CLUS_TEMP has 4 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13051  proc distance data=WORK.Clus_temp out=EMWS1.Clus_DISTANCE method=l(2) shape=square;
13052  id _idvar_;
13053  var interval(%dmvqvars);
13054  run;

NOTE: The data set EMWS1.CLUS_DISTANCE has 4 observations and 5 variables.
NOTE: PROCEDURE DISTANCE used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

13055  proc mds data=EMWS1.Clus_DISTANCE out=WORK.Clus_mds level=absolute nohist shape=square dim=3;
13056  object _idvar_;
13057  run;

NOTE: Convergence assumed because the badness-of-fit criterion 1.107787E-16 is less than or equal to MINCRIT=1E-6.
NOTE: The data set WORK.CLUS_MDS has 5 observations and 8 variables.
NOTE: PROCEDURE MDS used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13058  quit;
13059  data WORK.Clus_mds;
13060  set WORK.Clus_mds;
13061  if _type_ ne 'CONFIG' then delete;
13062  run;

NOTE: There were 5 observations read from the data set WORK.CLUS_MDS.
NOTE: The data set WORK.CLUS_MDS has 4 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13063  data WORK.Clus_mds(label="&label" keep=_idvar_ _radius_ dim1 dim2 dim3);
WARNING: Apparent symbolic reference LABEL not resolved.
13064  merge WORK.Clus_temp WORK.Clus_mds;
13065  run;

NOTE: There were 4 observations read from the data set WORK.CLUS_TEMP.
NOTE: There were 4 observations read from the data set WORK.CLUS_MDS.
NOTE: The data set WORK.CLUS_MDS has 4 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13066  options nodate;
13067  title1 "%sysfunc(sasmsg(sashelp.dmine, rpt_ClusterDistance_title, NOQUOTE))";
13068  %plotit(data=WORK.Clus_mds, datatype=mds, radii=_radius_, labelvar=_idvar_, symtype=circle, symbols='*', gout=WORK.Clus, gname=DISTANCE, gopts2=nodisplay, gopts=device=GIF, gopplot=cback=white, titlecol=black, labelcol=black, tickcol=black,
13069     framecol=black, post=C:\Users\Mohamed\AppData\Local\Temp\SAS Temporary Files\_TD10340_DESKTOP-MVTLU7L_\plotit.ps);

                                                                                                                    Types Legend  | CONFIG
                                                                                                                    --------------+---------
                                                                                                                    Symbol Types  | circle
                                                                                                                    Symbols       | *
                                                                                                                    Symbol Colors | cx000000
                                                                                                                    Label  Colors | cx000000
                                                                                                                    Symbol Sizes  | 1
                                                                                                                    Label  Sizes  | 1
                                                                                                                    Symbol Fonts  | none
                                                                                                                    Label  Fonts  | none
                                                                                                                    ------------------------

                                                                                                         Iterative Scatter Plot of Labeled Points Macro

                                                                                                    Iteration    Place    Line Size    Page Size    Penalty
                                                                                                    -------------------------------------------------------
                                                                                                        1          2         65           45            0

The following code will create the printer plot on which the graphical plot is based:

options nonumber ls=65 ps=45;
proc plot nolegend formchar='|----|+|---' data=preproc vtoh=2;
   plot Dim2 * Dim1 $ _idvar_ = _symbol_ /
        haxis=by 10 vaxis=by 10 box list=1
        placement=((h=2 -2 : s=right left) (v=1 -1 * h=0 -1 to -5 by alt));
   label Dim2 = 'Dimension 2' Dim1 = 'Dimension 1';
   label Dim2 = '#' Dim1 = '#';
   run; quit;

The plot was created with the following goptions:

goptions nodisplay hpos=74 vpos=28 hsize=8.33in vsize=6.24in cback=white device=GIF;

The OUT=anno Annotate data set has 207 observations.
The PLOTIT macro used 1.7 seconds to create OUT=anno.
13070  goptions display;
13071  title;

13072  filename gsasfile "D:\Nida\Data
13072! mining\datamining\BOGO\Workspaces\EMWS1\Clus\GRAPH\Distance.gif";
13073  goptions reset=all device=PNG display gaccess= gsasfile gsfmode= replace cback= white;
13074  proc greplay igout=WORK.Clus nofs;
NOTE: Building list of graphs from the catalog.

NOTE: Enter greplay commands or statements.
13075  replay DISTANCE;
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this 
      session.
NOTE: 23033 bytes written to D:\Nida\Data 
      mining\datamining\BOGO\Workspaces\EMWS1\Clus\GRAPH\Distance.gif.
13076  quit;

NOTE: PROCEDURE GREPLAY used (Total process time):
      real time           0.34 seconds
      cpu time            0.34 seconds
      

13077  goptions reset=all;
13078  filename gsasfile;
NOTE: Fileref GSASFILE has been deassigned.

13079  proc datasets lib=EMWS1 nolist;
13080  modify Clus_DISTANCE;
13081  rename _idvar_=_SEGMENT_;
NOTE: Renaming variable _idvar_ to _SEGMENT_.
13082  run;

NOTE: MODIFY was successful for EMWS1.CLUS_DISTANCE.DATA.
13083  quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
      

13084  *------------------------------------------------------------*;
13085  * Clus: Creating data set for Input Mean report;
13086  *------------------------------------------------------------*;
13087  data temp(drop=_type_ over_all);
13088  set EMWS1.Clus_OUTSTAT;
13089  where _type_ in('DMDB_MEAN', 'CLUS_MEAN');
13090  run;

NOTE: There were 5 observations read from the data set EMWS1.CLUS_OUTSTAT.
      WHERE _type_ in ('CLUS_MEAN', 'DMDB_MEAN');
NOTE: The data set WORK.TEMP has 5 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13091  proc sort data=temp;
13092  by _SEGMENT_;
13093  run;

NOTE: There were 5 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 5 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13094  proc stdize data=temp out=stdtemp pctlpts=0 100 outstat=stat;
13095  var AffluenceGrade--REP_GenderM;
13096  run;

NOTE: There were 5 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.STDTEMP has 5 observations and 9 variables.
NOTE: The data set WORK.STAT has 10 observations and 9 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13097  proc transpose data=stat out=tstat(rename=(COL1=MEAN COL2=STD COL3=MIN COL4=MAX));
13098  where _type_ in ('LOCATION', 'SCALE','P0', 'P100');
13099  run;

NOTE: There were 4 observations read from the data set WORK.STAT.
      WHERE _type_ in ('LOCATION', 'P0', 'P100', 'SCALE');
NOTE: The data set WORK.TSTAT has 8 observations and 6 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

13100  data tstat( rename=(_NAME_=NAME) keep=_NAME_ cv stdmin stdmax);
13101  set tstat;
13102  if std ^in (0, .) then do;
13103  stdmin = abs((min-mean)/std);
13104  stdmax = abs((max-mean)/std);
13105  end;
13106  if mean ^in(0, .) then cv = std/mean;
13107  run;

NOTE: There were 8 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 8 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13108  proc sort data=tstat;
13109  by NAME;
13110  run;

NOTE: There were 8 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 8 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13111  proc transpose data=stdtemp out=tstdtemp(rename=(_NAME_=NAME _LABEL_=LABEL COL1=MEAN));
13112  by _SEGMENT_;
13113  run;

NOTE: There were 5 observations read from the data set WORK.STDTEMP.
NOTE: The data set WORK.TSTDTEMP has 40 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13114  proc sort data=tstdtemp;
13115  by NAME;
13116  run;

NOTE: There were 40 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set WORK.TSTDTEMP has 40 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13117  data tstdtemp;
13118  merge tstdtemp tstat;
13119  by NAME;
13120  STDMEAN = (MEAN + stdmin)/(stdmin + stdmax);
13121  drop stdmin stdmax mean;
13122  run;

NOTE: There were 40 observations read from the data set WORK.TSTDTEMP.
NOTE: There were 8 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTDTEMP has 40 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13123  proc transpose data=EMWS1.Clus_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME
13123! VARIABLE=INPUT));
13124  var AffluenceGrade--REP_GenderM;
13125  id _type_;
13126  where _type_ = 'VARIABLE';
13127  run;

NOTE: There were 1 observations read from the data set EMWS1.CLUS_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 9 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13128  proc sort data=tempVar;
13129  by NAME;
13130  run;

NOTE: There were 9 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 9 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13131  data EMWS1.Clus_INPUTMEAN(rename=(NAME=VARIABLE));
13132  Length _SEGMENT_CHAR_ $7;
13133  label _SEGMENT_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentName_vlabel,  NOQUOTE))"
13133! _SEGMENT_CHAR_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentId_vlabel,    NOQUOTE))" NAME =
13133! "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel,     NOQUOTE))" INPUT =
13134     "%sysfunc(sasmsg(sashelp.dmine, rpt_input_vlabel,        NOQUOTE))" LABEL =
13134! "%sysfunc(sasmsg(sashelp.dmine, rpt_label_vlabel,        NOQUOTE))" CV =
13134! "%sysfunc(sasmsg(sashelp.dmine, rpt_cv_vlabel,           NOQUOTE))" STDMEAN =
13135     "%sysfunc(sasmsg(sashelp.dmine, rpt_normmean_vlabel,     NOQUOTE))";
13136  merge tempvar tstdtemp;
13137  by NAME;
13138  if LABEL='' then LABEL=NAME;
13139  _SEGMENT_CHAR_ = strip(put(_SEGMENT_, best.));
13140  if _SEGMENT_ = . then _SEGMENT_CHAR_='Overall';
13141  run;

NOTE: There were 9 observations read from the data set WORK.TEMPVAR.
NOTE: There were 40 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set EMWS1.CLUS_INPUTMEAN has 41 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

13142  proc sort data=EMWS1.Clus_INPUTMEAN;
13143  by descending cv;
13144  run;

NOTE: There were 41 observations read from the data set EMWS1.CLUS_INPUTMEAN.
NOTE: The data set EMWS1.CLUS_INPUTMEAN has 41 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13145  *------------------------------------------------------------*;
13146  * Clus: Determining the important variables;
13147  *------------------------------------------------------------*;

13148  %let _nobs = 0;
13149  data keepvars(rename=(NAME=INPUT));
13150  set EMWS1.Clus_OUTIMPORT(where=(IMPORTANCE>0.5)) end=eof;
13151  if eof then call symput('_nobs', strip(put(_N_, best.)));
13152  run;

NOTE: There were 4 observations read from the data set EMWS1.CLUS_OUTIMPORT.
      WHERE IMPORTANCE>0.5;
NOTE: The data set WORK.KEEPVARS has 4 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13153  proc transpose data=EMWS1.Clus_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME
13153! VARIABLE=INPUT));
13154  var AffluenceGrade--REP_GenderM;
13155  id _type_;
13156  where _type_ = 'VARIABLE';
13157  run;

NOTE: There were 1 observations read from the data set EMWS1.CLUS_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 9 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

13158  proc sort data=keepvars;
13159  by INPUT;
13160  run;

NOTE: There were 4 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.KEEPVARS has 4 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13161  proc sort data=tempvar;
13162  by INPUT;
13163  run;

NOTE: There were 9 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 9 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13164  data vars;
13165  merge tempvar keepvars(in=b);
13166  by INPUT;
13167  if b then output;
13168  run;

WARNING: Multiple lengths were specified for the BY variable INPUT by input data sets. This might 
         cause unexpected results.
NOTE: There were 9 observations read from the data set WORK.TEMPVAR.
NOTE: There were 4 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.VARS has 5 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13169  proc sort data=vars;
13170  by descending importance;
13171  run;

NOTE: There were 5 observations read from the data set WORK.VARS.
NOTE: The data set WORK.VARS has 5 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13172  data _null_;
13173  set vars;
13174  if _N_=1 then call symput('CLUS_PROFVARS', strip(NAME));
13175  else call symput('CLUS_PROFVARS',symget('CLUS_PROFVARS')!!' '!!strip(NAME));
13176  run;

NOTE: There were 5 observations read from the data set WORK.VARS.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13177  *------------------------------------------------------------*;
13178  * mergeVarMeansandClusLabel;
13179  *------------------------------------------------------------*;
13180  data temp(keep=_SEGMENT_ &CLUS_PROFVARS);
13181  length _SEGMENT_ &CLUS_PROFVARS 8;
13182  set EMWS1.Clus_OUTSTAT;
13183  where _type_ ='CLUS_MEAN';
13184  run;

NOTE: There were 4 observations read from the data set EMWS1.CLUS_OUTSTAT.
      WHERE _type_='CLUS_MEAN';
NOTE: The data set WORK.TEMP has 4 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13185  proc sort data=temp;
13186  by _SEGMENT_;
13187  run;

NOTE: There were 4 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 4 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13188  data EMWS1.Clus_LABEL;
13189  merge EMWS1.Clus_LABEL(keep=_SEGMENT_ LABEL) temp;
13190  by _SEGMENT_;
13191  run;

NOTE: There were 4 observations read from the data set EMWS1.CLUS_LABEL.
NOTE: There were 4 observations read from the data set WORK.TEMP.
NOTE: The data set EMWS1.CLUS_LABEL has 4 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

