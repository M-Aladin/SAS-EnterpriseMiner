*------------------------------------------------------------*
User:                Mohamed
Date:                May 09, 2018
Time:                14:56:01
Site:                12400032
Platform:            X64_10HOME
Maintenance Release: 9.04.01M4P110916
EM Version:          14.2
* 
*------------------------------------------------------------*
* Training Log
Date:                May 09, 2018
Time:                14:55:49
*------------------------------------------------------------*
11405  proc freq data=EMWS1.Clus3_VariableSet noprint;
11406  table ROLE*LEVEL/out=WORK.Clus3META;
11407  run;
 
NOTE: There were 26 observations read from the data set EMWS1.CLUS3_VARIABLESET.
NOTE: The data set WORK.CLUS3META has 6 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
 
 
11408  proc print data=WORK.Clus3META label noobs;
11409  var ROLE LEVEL COUNT;
11410  label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
11411  title9 ' ';
11412  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
11413  run;
 
NOTE: There were 6 observations read from the data set WORK.CLUS3META.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
11414  title10;
 
11415  data WORK.M2Z2LZAA;
11416  set WORK.M2Z2LZAA;
11417  if role eq 'REJECTED' then role = 'INPUT';
11418  run;
 
NOTE: There were 18 observations read from the data set WORK.M2Z2LZAA.
NOTE: The data set WORK.M2Z2LZAA has 18 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11427  *------------------------------------------------------------*;
11428  * Clus3: Training;
11429  *------------------------------------------------------------*;
11430  *------------------------------------------------------------* ;
11431  * Clus3: DMDBClass Macro ;
11432  *------------------------------------------------------------* ;
11433  %macro DMDBClass;
11434      CampaignViewedEmail(ASC) FacebookLike(ASC) LoyaltyClass(ASC)
11435     MobileApplications(ASC) PreviousCampaign(ASC) REP_AdvertisementZone(ASC)
11436     REP_ClusterGroup(ASC) REP_Gender(ASC) REP_Region(ASC)
11437  %mend DMDBClass;
11438  *------------------------------------------------------------* ;
11439  * Clus3: DMDBVar Macro ;
11440  *------------------------------------------------------------* ;
11441  %macro DMDBVar;
11442      AffluenceGrade CleanserProducts DayCareProducts LotionProducts
11443     NightRepairProducts REP_Age REP_LoyaltyTime TimeSinceLastPurchase TotalSpend
11444  %mend DMDBVar;
11445  *------------------------------------------------------------*;
11446  * Clus3: Create DMDB;
11447  *------------------------------------------------------------*;
11448  proc dmdb batch data=EMWS1.Filter_TRAIN
11449  dmdbcat=WORK.Clus3_DMDB
11450  maxlevel = 513
11451  out=WORK.Clus3_DMDB
11452  ;
11453  class %DMDBClass;
11454  var %DMDBVar;
11455  run;
 
NOTE: Records processed = 4224   Memory used = 511K.
NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS1.IDS2_DATA.
NOTE: View EMWS1.FILTER_TRAIN.VIEW used (Total process time):
      real time           0.25 seconds
      cpu time            0.25 seconds
 
NOTE: There were 23000 observations read from the data set EMWS1.REPL_TRAIN.
NOTE: There were 4224 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: The data set WORK.CLUS3_DMDB has 4224 observations and 18 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.26 seconds
      cpu time            0.28 seconds
 
 
11456  quit;
11457  *--- end code ---*;
 
11458  *------------------------------------------------------------* ;
11459  * Clus3: Interval Inputs Macro ;
11460  *------------------------------------------------------------* ;
11461  %macro DMVQINTERVAL;
11462      AffluenceGrade CleanserProducts DayCareProducts LotionProducts
11463     NightRepairProducts REP_Age REP_LoyaltyTime TimeSinceLastPurchase TotalSpend
11464  %mend DMVQINTERVAL;
11465  *------------------------------------------------------------* ;
11466  * Clus3: Nominal Inputs Macro ;
11467  *------------------------------------------------------------* ;
11468  %macro DMVQNOMINAL;
11469      CampaignViewedEmail FacebookLike LoyaltyClass MobileApplications
11470     PreviousCampaign REP_AdvertisementZone REP_ClusterGroup REP_Gender REP_Region
11471  %mend DMVQNOMINAL;
11472  *------------------------------------------------------------*;
11473  * Clus3: Run DMVQ procedure;
11474  *------------------------------------------------------------*;
11475  title;
11476  options nodate;
11477  proc dmvq data=WORK.Clus3_DMDB dmdbcat=WORK.Clus3_DMDB std=STD nominal=GLM ordinal=RANK
11478  ;
NOTE: The training set WORK.CLUS3_DMDB.DATA has 18 variable(s).
NOTE: The DMVQ statement has finished with return code=0 and status=begin.
11479  input %DMVQINTERVAL / level=interval;
NOTE: 9 input variable(s) defined for ID=I1.
NOTE: The INPUT statement has finished with return code=0 and status=variables.
11480  input %DMVQNOMINAL / level=nominal;
NOTE: 9 input variable(s) defined for ID=I2.
NOTE: The INPUT statement has finished with return code=0 and status=variables.
11481  VQ maxc = 4 clusname=_SEGMENT_ CLUSLABEL="Segment Id" DISTLABEL="Distance";
NOTE: A maximum of 4 clusters have been requested.
NOTE: The VQ statement has finished with return code=0 and status=architecture.
11482  MAKE outvar=EMWS1.Clus3_OUTVAR;
WARNING: Variable FacebookLike is omitted from the analysis because it has only one category.
 
NOTE: 18 input variable(s).
NOTE: Number of cases=4224
NOTE: Sum of frequencies=4224
NOTE: Sum of weights=4224
NOTE: VARDEF=DF
NOTE: Maximum number of categories=14
NOTE: The total number of variables is 18 with dimensionality 46.
NOTE: 17 variables will be used for clustering.
NOTE: Open output data set EMWS1.CLUS3_OUTVAR.DATA with 48 variables.
NOTE: The data set EMWS1.CLUS3_OUTVAR has 4 observations and 48 variables.
NOTE: The MAKE statement has finished with return code=0 and status=made.
11483  INITIAL radius=0
11484  initial=OUTLIER
11485  ;
NOTE: 4 seeds were selected from data set WORK.CLUS3_DMDB.DATA using the OUTLIER algorithm.
NOTE: The INITIAL statement has finished with return code=0 and status=initialized.
11486  TRAIN tech=FORGY
11487  ;
NOTE: F-Convergence criterion is satisfied.
NOTE: The TRAIN statement has finished with return code=0 and status=trained.
11488  SAVE outstat=EMWS1.Clus3_OUTSTAT outmean=EMWS1.Clus3_OUTMEAN;
NOTE: The data set EMWS1.CLUS3_OUTSTAT has 40 observations and 49 variables.
NOTE: The data set EMWS1.CLUS3_OUTMEAN has 4 observations and 55 variables.
NOTE: The SAVE statement has finished with return code=0 and status=statistics.
11489  code file="D:\Nida\Data mining\datamining\BOGO\Workspaces\EMWS1\Clus3\DMVQSCORECODE.sas"
11490  group=Clus3
11491  ;
NOTE: External file D:\Nida\Data mining\datamining\BOGO\Workspaces\EMWS1\Clus3\DMVQSCORECODE.sas opened.
NOTE: The CODE statement has finished with return code=0 and status=statistics.
11492  run;
 
11493  quit;
 
NOTE: There were 4224 observations read from the data set WORK.CLUS3_DMDB.
NOTE: PROCEDURE DMVQ used (Total process time):
      real time           0.10 seconds
      cpu time            0.11 seconds
 
 
11494  libname _spdslib;
WARNING: Libref _SPDSLIB is not assigned.
 
11495  *------------------------------------------------------------*;
11496  * Clus3: Cluster Label;
11497  *------------------------------------------------------------*;
11498  data EMWS1.Clus3_LABEL;
11499  length _SEGMENT_ 8 Label $80;
11500  format _SEGMENT_ 4.;
11501  label _SEGMENT_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentName_vlabel,  NOQUOTE))";
11502  label Label = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentLabel_vlabel,  NOQUOTE))";
11503  _SEGMENT_= 1;
11504  Label='Cluster1';
11505  output;
11506  _SEGMENT_= 2;
11507  Label='Cluster2';
11508  output;
11509  _SEGMENT_= 3;
11510  Label='Cluster3';
11511  output;
11512  _SEGMENT_= 4;
11513  Label='Cluster4';
11514  output;
11515  run;
 
NOTE: The data set EMWS1.CLUS3_LABEL has 4 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
*------------------------------------------------------------*
* Score Log
Date:                May 09, 2018
Time:                14:55:50
*------------------------------------------------------------*
11617  proc transpose data=EMWS1.Clus3_OUTVAR out=WORK.Clus3_OUTVAR(rename=(COl2=NAME) where=(COL1='IMPUTED'));
11618  var AffluenceGrade--REP_RegionU;
11619  where _TYPE_ in('TYPE' 'VARIABLE');
11620  run;
 
NOTE: There were 2 observations read from the data set EMWS1.CLUS3_OUTVAR.
      WHERE _TYPE_ in ('TYPE', 'VARIABLE');
NOTE: The data set WORK.CLUS3_OUTVAR has 0 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
11621  proc sort data=WORK.Clus3_OUTVAR;
11622  by NAME;
11623  run;
 
NOTE: Input data set is empty.
NOTE: The data set WORK.CLUS3_OUTVAR has 0 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11624  proc sort data=EMWS1.Clus3_VariableSet(KEEP=NAME ROLE LEVEL) out=WORK.Clus3_SORTEDVARS;
11625  by NAME;
11626  run;
 
NOTE: There were 26 observations read from the data set EMWS1.CLUS3_VARIABLESET.
NOTE: The data set WORK.CLUS3_SORTEDVARS has 26 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
11627  data WORK.Clus3_OUTVAR;
11628  merge WORK.Clus3_OUTVAR(in=INVAR) WORK.Clus3_SORTEDVARS;
11629  by NAME;
11630  if INVAR then output;
11631  run;
 
WARNING: Multiple lengths were specified for the BY variable NAME by input data sets. This might cause unexpected results.
NOTE: There were 0 observations read from the data set WORK.CLUS3_OUTVAR.
NOTE: There were 26 observations read from the data set WORK.CLUS3_SORTEDVARS.
NOTE: The data set WORK.CLUS3_OUTVAR has 0 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this session.
11632  filename emflow "D:\Nida\Data mining\datamining\BOGO\Workspaces\EMWS1\Clus3\EMFLOWSCORE.sas";
11633  *------------------------------------------------------------*;
11634  * Clus3: Scoring DATA data;
11635  *------------------------------------------------------------*;
11636  data EMWS1.Clus3_TRAIN
11637  / view=EMWS1.Clus3_TRAIN
11638  ;
11639  set EMWS1.Filter_TRAIN
11640  ;
11641  %inc emflow;
12682  run;
 
NOTE: DATA STEP view saved on file EMWS1.CLUS3_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.FILTER_TRAIN.VIEW used (Total process time):
      real time           0.20 seconds
      cpu time            0.18 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.20 seconds
      cpu time            0.18 seconds
 
 
12683  quit;
12684  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
 
12685  *------------------------------------------------------------*;
12686  * Clus3: Computing metadata for TRAIN data;
12687  *------------------------------------------------------------*;
 
NOTE: View EMWS1.CLUS3_TRAIN.VIEW used (Total process time):
      real time           0.20 seconds
      cpu time            0.20 seconds
 
NOTE: View EMWS1.CLUS3_TRAIN.VIEW used (Total process time):
      real time           0.20 seconds
      cpu time            0.18 seconds
 
*------------------------------------------------------------*
* Report Log
Date:                May 09, 2018
Time:                14:55:52
*------------------------------------------------------------*
13097  data WORK.M3CIKD3D;
13098  set WORK.M3CIKD3D;
13099  if role eq 'REJECTED' then role = 'INPUT';
13100  run;
 
NOTE: There were 18 observations read from the data set WORK.M3CIKD3D.
NOTE: The data set WORK.M3CIKD3D has 18 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13101  data WORK.M3CIKD3D;
13102  set WORK.M3CIKD3D end=_eof_ nobs=_nobs_;
13103  output;
13104  if _eof_ then do;
13105  name = '_SEGMENT_';
13106  ROLE = 'TARGET';
13107  LEVEL = 'NOMINAL';
13108  LABEL = 'Segment Variable';
13109  TYPE = 'N';
13110  FORMAT = '';
13111  INFORMAT = '';
13112  USE='Y';
13113  output;
13114  end;
13115  run;
 
NOTE: There were 18 observations read from the data set WORK.M3CIKD3D.
NOTE: The data set WORK.M3CIKD3D has 19 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13116  *------------------------------------------------------------*;
13117  * Clus3: Create decision matrix;
13118  *------------------------------------------------------------*;
13119  *------------------------------------------------------------* ;
13120  * Clus3: Tree Variables Macro ;
13121  *------------------------------------------------------------* ;
13122  %macro EM_TREEVARS;
13123      AffluenceGrade CampaignViewedEmail CleanserProducts DayCareProducts
13124     FacebookLike LotionProducts LoyaltyClass MobileApplications NightRepairProducts
13125     PreviousCampaign REP_AdvertisementZone REP_Age REP_ClusterGroup REP_Gender
13126     REP_LoyaltyTime REP_Region TimeSinceLastPurchase TotalSpend
13127  %mend EM_TREEVARS;
13128  *------------------------------------------------------------* ;
13129  * Clus3: Tree Targets Macro ;
13130  *------------------------------------------------------------* ;
13131  %macro EM_TREETARGETS;
13132      _SEGMENT_
13133  %mend EM_TREETARGETS;
13134  data EMWS1.EM_Clus3 / view=EMWS1.EM_Clus3;
13135  set EMWS1.Clus3_TRAIN(keep=%EM_TREEVARS %EM_TREETARGETS);
13136  run;
 
NOTE: DATA STEP view saved on file EMWS1.EM_CLUS3.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.CLUS3_TRAIN.VIEW used (Total process time):
      real time           0.20 seconds
      cpu time            0.20 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.23 seconds
      cpu time            0.25 seconds
 
 
13137  *------------------------------------------------------------* ;
13138  * Clus3: Interval Inputs Macro ;
13139  *------------------------------------------------------------* ;
13140  %macro INTINPUTS;
13141      AffluenceGrade CleanserProducts DayCareProducts LotionProducts
13142     NightRepairProducts REP_Age REP_LoyaltyTime TimeSinceLastPurchase TotalSpend
13143  %mend INTINPUTS;
13144  *------------------------------------------------------------* ;
13145  * Clus3: Binary and Nominal Inputs Macro ;
13146  *------------------------------------------------------------* ;
13147  %macro NOMINPUTS;
13148      CampaignViewedEmail FacebookLike LoyaltyClass MobileApplications
13149     PreviousCampaign REP_AdvertisementZone REP_ClusterGroup REP_Gender REP_Region
13150  %mend NOMINPUTS;
13151  *------------------------------------------------------------* ;
13152  * Clus3: Ordinal Inputs Macro ;
13153  *------------------------------------------------------------* ;
13154  %macro ORDINPUTS;
13155
13156  %mend ORDINPUTS;
13157  *------------------------------------------------------------*;
13158  * Clus3: Run ARBOR procedure;
13159  *------------------------------------------------------------*;
 
13160  proc arbor data=EMWS1.EM_Clus3
13161  MAXSURRS=5
13162  ;
13163  ;
13164  input %INTINPUTS
13165  / level = interval;
13166  input %NOMINPUTS
13167  / level=nominal;
13168  target _SEGMENT_ / level=NOMINAL
13169  Criterion=PROBCHISQ
13170  ;
13171  ;
13172  Performance DISK
13173  ;
13174  MAKEMACRO NLEAVES=nleaves;
NOTE: 1385333 kilobytes of physical memory.
NOTE: Will use 4224 out of 4224 training cases.
NOTE: Using memory pool with 221945856 bytes.
NOTE: Will not search for split on variable FacebookLike.
NOTE: Acceptable cases have the same value.
NOTE: Option MINCATSIZE=5 may apply.
NOTE: Passed training data 18 times.
NOTE: Training used 2009544 bytes of work memory.
NOTE: The subtree sequence contains 21 subtrees. The largest has 41 nodes and 21 leaves.
NOTE: Using subtree with 33 nodes and 17 leaves.
NOTE: Created macro variable NLEAVES equal to 17.
13175  save
13176  MODEL=EMWS1.Clus3_PLOTDS
13177  SEQUENCE=EMWS1.Clus3_OUTSEQ
13178  IMPORTANCE=EMWS1.Clus3_OUTIMPORT
13179  NODESTAT=EMWS1.Clus3_OUTNODES
13180  SUMMARY=WORK.OUTSUMMARY_TREE_10IRQ92
13181  STATSBYNODE=WORK.OUTSTATS_TREE_10IRQ92
13182  Pathlistnonmissing = WORK.OUTPATH_TREE_10IRQ92
13183  Rules = WORK.OUTRULES_TREE_10IRQ92
13184  ;
NOTE: The data set EMWS1.CLUS3_OUTIMPORT has 18 observations and 5 variables.
NOTE: The data set EMWS1.CLUS3_PLOTDS has 1737 observations and 4 variables.
NOTE: The data set EMWS1.CLUS3_OUTNODES has 33 observations and 24 variables.
NOTE: The data set WORK.OUTPATH_TREE_10IRQ92 has 181 observations and 7 variables.
NOTE: The data set WORK.OUTRULES_TREE_10IRQ92 has 510 observations and 6 variables.
NOTE: The data set EMWS1.CLUS3_OUTSEQ has 21 observations and 11 variables.
NOTE: The data set WORK.OUTSTATS_TREE_10IRQ92 has 198 observations and 5 variables.
NOTE: The data set WORK.OUTSUMMARY_TREE_10IRQ92 has 20 observations and 7 variables.
13185  run;
 
13186  quit;
 
NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS1.IDS2_DATA.
NOTE: There were 23000 observations read from the data set EMWS1.REPL_TRAIN.
NOTE: There were 4224 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: View EMWS1.EM_CLUS3.VIEW used (Total process time):
      real time           1.23 seconds
      cpu time            1.17 seconds
 
NOTE: There were 4224 observations read from the data set EMWS1.CLUS3_TRAIN.
NOTE: There were 4224 observations read from the data set EMWS1.EM_CLUS3.
NOTE: The data set WORK._NAMEDAT has 4 observations and 5 variables.
NOTE: PROCEDURE ARBOR used (Total process time):
      real time           1.23 seconds
      cpu time            1.17 seconds
 
 
13187  data EMWS1.Clus3_OUTIMPORT;
13188  set EMWS1.Clus3_OUTIMPORT;
13189  label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel, noquote))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, noquote))" NRULES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nrules_vlabel, noquote))" IMPORTANCE =
13190     "%sysfunc(sasmsg(sashelp.dmine, rpt_importance_vlabel, noquote))" NSURROGATES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nsurrogates_vlabel, noquote))"
13191  ;
13192  run;
 
NOTE: There were 18 observations read from the data set EMWS1.CLUS3_OUTIMPORT.
NOTE: The data set EMWS1.CLUS3_OUTIMPORT has 18 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
13193  filename x "D:\Nida\Data mining\datamining\BOGO\Workspaces\EMWS1\Clus3\ENGLISHRULES.txt" encoding='utf-8' NOBOM;
 
13194  data temp;
13195  length varname $30;
13196  retain varname;
13197  set WORK.OUTPATH_TREE_10IRQ92;
13198  if ^missing(variable) then varname=variable;
13199  else if ^missing(var_name) then varname=var_name;
13200  output;
13201  run;
 
NOTE: There were 181 observations read from the data set WORK.OUTPATH_TREE_10IRQ92.
NOTE: The data set WORK.TEMP has 181 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13202  proc sort data=temp;
13203  by node;
13204  run;
 
NOTE: There were 181 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 181 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13205  proc sort data=EMWS1.Clus3_OUTNODES out=outnodes;
13206  by node;
13207  run;
 
NOTE: There were 33 observations read from the data set EMWS1.CLUS3_OUTNODES.
NOTE: The data set WORK.OUTNODES has 33 observations and 24 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13208  data temp;
13209  merge temp(in=_a) outnodes(keep= node
13210  NPRIORS
13211  P__SEGMENT_3
13212  P__SEGMENT_4
13213  P__SEGMENT_2
13214  P__SEGMENT_1
13215  );
13216  by node;
13217  if _a;
13218  run;
 
NOTE: There were 181 observations read from the data set WORK.TEMP.
NOTE: There were 33 observations read from the data set WORK.OUTNODES.
NOTE: The data set WORK.TEMP has 181 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13219  proc sort data=temp;
13220  by node descending varname descending numeric_value;
13221  run;
 
NOTE: There were 181 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 181 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13222  data _null_;
13223  file x;
13224  set temp;
13225  by node descending varname;
13226  retain origvar oldnode string;
13227  length origvar $32 oldnode 8 string $200;
13228  if _n_ = 1 then do;
13229  origvar = varname;
13230  oldnode = node;
13231  end;
13232  if first.node then do;
13233  put "&EM_CODEBAR";
13234  put " Node = " node;
13235  put "&EM_CODEBAR";
13236  end;
13237  if first.varname then do;
13238  if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
13239  if MISSING(CHARACTER_VALUE) then do;
13240  if NUMERIC_VALUE ne . then do;
13241  if ^first.node then do;
13242  string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
13243  end;
13244  else do;
13245  string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
13246  end;
13247  end;
13248  end;
13249  else do;
13250  if ^first.node then do;
13251  string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
13252  end;
13253  else do;
13254  string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
13255  end;
13256  end;
13257  end;
13258  else if RELATION in ("=") then do;
13259  if ^first.node then do;
13260  string = "AND "||strip(varname) ||" IS ONE OF: "||character_value;
13261  end;
13262  else do;
13263  string = "if "|| strip(varname) ||" IS ONE OF: "||character_value;
13264  end;
13265  end;
13266  else if RELATION in ("ISMISSING") then do;
13267  if ^first.node then do;
13268  string = " AND "|| strip(varname) || " equals Missing";
13269  end;
13270  else do;
13271  string = "if "|| strip(varname) ||" equals Missing";
13272  end;
13273  end;
13274  else if RELATION in ("ISNOTMISSING") then do;
13275  if ^first.node then do;
13276  string = " AND "|| strip(varname) || " equals All Values";
13277  end;
13278  else do;
13279  string = "if "|| strip(varname) ||" equals All Values";
13280  end;
13281  end;
13282  if ^missing(varname) then origvar = varname;
13283  oldnode=node;
13284  end;
13285  else do;
13286  if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
13287  if MISSING(CHARACTER_VALUE) then do;
13288  if NUMERIC_VALUE ne . then do;
13289  if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
13290  else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
13291  end;
13292  end;
13293  else do;
13294  if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
13295  else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
13296  end;
13297  end;
13298  else if RELATION in ("=") then do;
13299  string = strip(string)||", "||strip(character_value);
13300  end;
13301  else if RELATION in ("ISMISSING") then do;
13302  end;
13303  if ^missing(varname) then origvar = varname;
13304  oldnode=node;
13305  end;
13306  if last.varname then do;
13307  if RELATION in ("ISMISSING") then do;
13308  if ^first.varname then do;
13309  string = strip(string) || " or MISSING";
13310  end;
13311  end;
13312  put string;
13313  if ^missing(varname) then origvar = varname;
13314  oldnode=node;
13315  end;
13316  if last.node then do;
13317  put "then ";
13318  put " Tree Node Identifier   = " node;
13319  put " Number of Observations = " NPRIORS;
13320  put " Predicted: _SEGMENT_=3  = " P__SEGMENT_3;
13321  put " Predicted: _SEGMENT_=4  = " P__SEGMENT_4;
13322  put " Predicted: _SEGMENT_=2  = " P__SEGMENT_2;
13323  put " Predicted: _SEGMENT_=1  = " P__SEGMENT_1;
13324  put " ";
13325  if ^missing(varname) then origvar = varname;
13326  oldnode=node;
13327  end;
13328  run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      13242:67    13245:66    13289:108   13290:72
NOTE: The file X is:
      Filename=D:\Nida\Data mining\datamining\BOGO\Workspaces\EMWS1\Clus3\ENGLISHRULES.txt,
      RECFM=V,LRECL=131068,File Size (bytes)=0,
      Last Modified=09May2018:14:55:53,
      Create Time=09May2018:14:55:53
 
NOTE: 264 records were written to the file X.
      The minimum record length was 1.
      The maximum record length was 62.
NOTE: There were 181 observations read from the data set WORK.TEMP.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13329  filename x;
NOTE: Fileref X has been deassigned.
 
13330  /* belowtext */
13331  data templabel;
13332  set WORK.OUTRULES_TREE_10IRQ92;
13333  if ((ROLE="PRIMARY") AND (STAT ="LABEL"));
13334  rename character_value = belowtext;
13335  keep NODE character_value;
13336  run;
 
NOTE: There were 510 observations read from the data set WORK.OUTRULES_TREE_10IRQ92.
NOTE: The data set WORK.TEMPLABEL has 5 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13337  data tempvar;
13338  set WORK.OUTRULES_TREE_10IRQ92;
13339  if ((ROLE="PRIMARY") AND (STAT="VARIABLE"));
13340  keep NODE character_value;
13341  run;
 
NOTE: There were 510 observations read from the data set WORK.OUTRULES_TREE_10IRQ92.
NOTE: The data set WORK.TEMPVAR has 16 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13342  proc sort data=templabel;
13343  by node;
13344  run;
 
NOTE: There were 5 observations read from the data set WORK.TEMPLABEL.
NOTE: The data set WORK.TEMPLABEL has 5 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13345  proc sort data=tempvar;
13346  by node;
13347  run;
 
NOTE: There were 16 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 16 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13348  data tempbelow;
13349  merge templabel tempvar;
13350  by node;
13351  if missing(belowtext) then belowtext= character_value;
13352  keep node belowtext;
13353  run;
 
NOTE: There were 5 observations read from the data set WORK.TEMPLABEL.
NOTE: There were 16 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPBELOW has 16 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13354  proc sort data=tempbelow;
13355  by node;
13356  run;
 
NOTE: There were 16 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.TEMPBELOW has 16 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13357  /* abovetext */
13358  data tempoutrules;
13359  set WORK.OUTRULES_TREE_10IRQ92;
13360  if ((ROLE='PRIMARY') AND(STAT in ("INTERVAL", "ORDINAL", "NOMINAL")));
13361  run;
 
NOTE: There were 510 observations read from the data set WORK.OUTRULES_TREE_10IRQ92.
NOTE: The data set WORK.TEMPOUTRULES has 19 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13362  proc sort data=tempoutrules;
13363  by node numeric_value;
13364  run;
 
NOTE: There were 19 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPOUTRULES has 19 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13365  data tempabove;
13366  set tempoutrules(rename=(node=parent));
13367  by parent numeric_value;
13368  retain abovetext tempstring flag branch origval origchar;
13369  *length abovetext tempstring origchar $45;
13370  length abovetext $256;
13371  length tempstring origchar $64;
13372  if STAT in ("INTERVAL", "ORDINAL") then do;
13373  if first.parent then do;
13374  if missing(character_value) then do;
13375  numeric_value = round(numeric_value, 0.0001);
13376  abovetext = "< "||strip(NUMERIC_VALUE);
13377  branch = 1;
13378  origval = numeric_value;
13379  output;
13380  end;
13381  else do;
13382  abovetext = "< "||strip(CHARACTER_VALUE);
13383  branch = 1;
13384  origchar = character_value;
13385  output;
13386  end;
13387  if first.parent AND last.parent then do;
13388  if missing(character_value) then do;
13389  numeric_value = round(numeric_value, 0.0001);
13390  branch = branch + 1;
13391  abovetext = ">= "||strip(NUMERIC_VALUE);
13392  output;
13393  end;
13394  else do;
13395  branch = branch + 1;
13396  abovetext = ">= "||strip(CHARACTER_VALUE);
13397  output;
13398  end;
13399  end;
13400  end;
13401  else if last.parent then do;
13402  if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
13403  if missing(character_value) then do;
13404  numeric_value = round(numeric_value, 0.0001);
13405  abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
13406  end;
13407  else do;
13408  abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
13409  end;
13410  branch = branch + 1;
13411  output;
13412  if missing(character_value) then do;
13413  numeric_value = round(numeric_value, 0.0001);
13414  abovetext = ">= "||strip(NUMERIC_VALUE);
13415  end;
13416  else do;
13417  abovetext = ">= "||strip(CHARACTER_VALUE);
13418  end;
13419  branch = branch + 1;
13420  output;
13421  end;
13422  else do;
13423  if missing(character_value) then do;
13424  numeric_value = round(numeric_value, 0.0001);
13425  abovetext = ">= "||strip(NUMERIC_VALUE);
13426  end;
13427  else do;
13428  abovetext = ">= "||strip(CHARACTER_VALUE);
13429  end;
13430  branch = branch + 1;
13431  output;
13432  end;
13433  end;
13434  else do;
13435  if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
13436  if missing(character_value) then do;
13437  numeric_value = round(numeric_value,0.0001);
13438  abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
13439  origval = numeric_value;
13440  end;
13441  else do;
13442  abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
13443  origchar = character_value;
13444  end;
13445  branch = branch + 1;
13446  output;
13447  end;
13448  else do;
13449  if missing(character_value) then do;
13450  numeric_value = round(numeric_value, 0.0001);
13451  abovetext = ">= "||strip(NUMERIC_VALUE);
13452  origval = numeric_value;
13453  end;
13454  else do;
13455  abovetext = ">= "||strip(CHARACTER_VALUE);
13456  origval = character_value;
13457  end;
13458  branch = branch + 1;
13459  output;
13460  end;
13461  end;
13462  end;
13463  else do;
13464  if first.numeric_value then do;
13465  flag = 0;
13466  abovetext = CHARACTER_VALUE;
13467  branch = numeric_value;
13468  if first.numeric_value AND last.numeric_value then do;
13469  output;
13470  end;
13471  end;
13472  else if last.numeric_value then do;
13473  if flag=0 then do;
13474  tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
13475  length = length(strip(tempstring));
13476  if length < 32 then do;
13477  abovetext = strip(tempstring);
13478  end;
13479  else do;
13480  abovetext = strip(abovetext)||", ...";
13481  flag = 1;
13482  end;
13483  end;
13484  branch = numeric_value;
13485  output;
13486  end;
13487  else do;
13488  if flag=0 then do;
13489  tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
13490  length = length(strip(tempstring));
13491  if length < 32 then do;
13492  abovetext = strip(tempstring);
13493  end;
13494  else do;
13495  abovetext = strip(abovetext)||", ...";
13496  flag=1;
13497  end;
13498  end;
13499  branch = numeric_value;
13500  end;
13501  end;
13502  keep parent branch abovetext;
13503  run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      13376:25   13391:26   13405:24   13405:47   13414:26   13425:26   13438:24   13438:47   13451:26
NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      13456:11
NOTE: There were 19 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPABOVE has 32 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13504  /* MIssing value to abovetext */
13505  data tempmissing;
13506  set WORK.OUTRULES_TREE_10IRQ92;
13507  if ((ROLE="PRIMARY") AND (STAT in ("MISSING")));
13508  rename node=parent numeric_value=branch character_value=misschar;
13509  run;
 
NOTE: There were 510 observations read from the data set WORK.OUTRULES_TREE_10IRQ92.
NOTE: The data set WORK.TEMPMISSING has 16 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13510  proc sort data=work.tempabove;
13511  by parent branch;
13512  run;
 
NOTE: There were 32 observations read from the data set WORK.TEMPABOVE.
NOTE: The data set WORK.TEMPABOVE has 32 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13513  proc sort data=EMWS1.Clus3_OUTNODES out=tempoutnodes;
13514  by parent branch;
13515  run;
 
NOTE: There were 33 observations read from the data set EMWS1.CLUS3_OUTNODES.
NOTE: The data set WORK.TEMPOUTNODES has 33 observations and 24 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13516  proc sort data=tempmissing;
13517  by parent branch;
13518  run;
 
NOTE: There were 16 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.TEMPMISSING has 16 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13519  data WORK.Clus3_outnodes;
13520  merge work.tempabove tempoutNodes(drop=abovetext ) tempmissing(in=_a);
13521  by parent branch;
13522  length traintotal validtotal 8;
13523  retain traintotal validtotal;
13524  if _a then do;
13525  if ^MISSING(abovetext) then do;
13526  abovetext= strip(abovetext)||" %sysfunc(sasmsg(sashelp.dmine, tree_ormiss_vlabel, noquote))";
13527  end;
13528  else do;
13529  abovetext = " %sysfunc(sasmsg(sashelp.dmine, tree_missonly_vlabel, noquote))";
13530  end;
13531  end;
13532  if MISSING(abovetext) then abovetext="%sysfunc(sasmsg(sashelp.dmine, tree_nonmiss_vlabel, noquote))";
13533  if node=1 then do;
13534  traintotal = N;
13535  validtotal=VN;
13536  end;
13537  label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
13538  drop role rank stat misschar belowtext;
13539  run;
 
NOTE: Variable VN is uninitialized.
NOTE: There were 32 observations read from the data set WORK.TEMPABOVE.
NOTE: There were 33 observations read from the data set WORK.TEMPOUTNODES.
NOTE: There were 16 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.CLUS3_OUTNODES has 33 observations and 26 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
 
 
13540  proc sort data=WORK.Clus3_outnodes;
13541  by node;
13542  run;
 
NOTE: There were 33 observations read from the data set WORK.CLUS3_OUTNODES.
NOTE: The data set WORK.CLUS3_OUTNODES has 33 observations and 26 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.10 seconds
      cpu time            0.03 seconds
 
 
13543  proc sort data=tempbelow;
13544  by node;
13545  run;
 
NOTE: Input data set is already sorted, no sorting done.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13546  data WORK.Clus3_outnodes;
13547  merge WORK.Clus3_outnodes tempbelow;
13548  by node;
13549  run;
 
NOTE: There were 33 observations read from the data set WORK.CLUS3_OUTNODES.
NOTE: There were 16 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.CLUS3_OUTNODES has 33 observations and 27 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS1.IDS2_DATA.
NOTE: There were 23000 observations read from the data set EMWS1.REPL_TRAIN.
NOTE: There were 4224 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: View EMWS1.EM_CLUS3.VIEW used (Total process time):
      real time           0.57 seconds
      cpu time            0.48 seconds
 
NOTE: There were 4224 observations read from the data set EMWS1.CLUS3_TRAIN.
13550  data tempoutstats;
13551  set WORK.OUTSTATS_TREE_10IRQ92;
13552  length tarlevel $8;
13553  tarlevel ="NOMINAL";
13554  run;
 
NOTE: There were 198 observations read from the data set WORK.OUTSTATS_TREE_10IRQ92.
NOTE: The data set WORK.TEMPOUTSTATS has 198 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13555  data EMWS1.Clus3_TREE_PLOT;
13556  length NODETEXT TEXTALL $800 N NODECOLOR 8;
13557  set WORK.Clus3_outnodes;
13558  label parent = "%sysfunc(sasmsg(sashelp.dmine, rpt_parentID_vlabel, noquote))" depth = "%sysfunc(sasmsg(sashelp.dmine, rpt_depth_vlabel, noquote))" belowtext= "%sysfunc(sasmsg(sashelp.dmine, rpt_belowtext_vlabel, noquote))" abovetext =
13559     "%sysfunc(sasmsg(sashelp.dmine, rpt_abovetext_vlabel, noquote))" linkwidth = "%sysfunc(sasmsg(sashelp.dmine, rpt_linkwidth_vlabel, noquote))" nodetext = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodetext_vlabel, noquote))" textall =
13560     "%sysfunc(sasmsg(sashelp.dmine, rpt_textall_vlabel, noquote))" N = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainn_vlabel, noquote))" nodecolor = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodecolor_vlabel, noquote))" node =
13561     "%sysfunc(sasmsg(sashelp.dmine, rpt_node_vlabel, noquote))";
13562  keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR;
13563  run;
 
NOTE: Variable TEXTALL is uninitialized.
NOTE: Variable NODECOLOR is uninitialized.
NOTE: There were 33 observations read from the data set WORK.CLUS3_OUTNODES.
NOTE: The data set EMWS1.CLUS3_TREE_PLOT has 33 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
13564  proc sort data=EMWS1.Clus3_TREE_PLOT;
13565  by node;
13566  run;
 
NOTE: There were 33 observations read from the data set EMWS1.CLUS3_TREE_PLOT.
NOTE: The data set EMWS1.CLUS3_TREE_PLOT has 33 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
13567  proc sort data=tempoutstats;
13568  by node;
13569  run;
 
NOTE: There were 198 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set WORK.TEMPOUTSTATS has 198 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
13570  data EMWS1.Clus3_TREE_PLOT;
13571  merge EMWS1.Clus3_TREE_PLOT tempoutstats;
13572  length text $800 _RASE_ P__SEGMENT_3 8;
13573  retain P__SEGMENT_3 eventlevel;
13574  by node;
13575  if statname='N' then N=statvalue;
13576  if statname='NPRIORS' then N=statvalue;
13577  if statname='PREDICTION' then eventlevel=category;
13578  _RASE_ = .;
13579  if tarlevel ^= 'INTERVAL' then do;
13580  if STATNAME = 'PROBABILITY' then do;
13581  if CATEGORY=EVENTLEVEL then do;
13582  nodetext = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
13583  text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
13584  P__SEGMENT_3 = round(STATVALUE, .01);
13585  end;
13586  else do;
13587  text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
13588  end;
13589  textall = strip(textall)||'0A'x||strip( text);
13590  end;
13591  if last.node then do;
13592  nodetext = trim(nodetext)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
13593  textall = trim(textall)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
13594  output EMWS1.Clus3_TREE_PLOT;
13595  end;
13596  end;
13597  else do;
13598  if statname='RASE' then _RASE_=statvalue;
13599  label _RASE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_trase_vlabel, noquote))";
13600  if STATNAME = 'PREDICTION' then do;
13601  nodetext= "%sysfunc(sasmsg(sashelp.dmine, rpt_average_vlabel, noquote))"|| put(STATVALUE, 13.4)||'0A'x|| "%sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
13602  textall = nodetext;
13603  P__SEGMENT_3 = STATVALUE;
13604  ;
13605  ;
13606  end;
13607  if last.node then do;
13608  output EMWS1.Clus3_TREE_PLOT;
13609  end;
13610  ;
13611  end;
13612  label P__SEGMENT_3 = "%sysfunc(sasmsg(sashelp.dmine, rpt_predictedvar_vlabel, noquote))";
13613  keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR _RASE_ P__SEGMENT_3;
13614  run;
 
NOTE: There were 33 observations read from the data set EMWS1.CLUS3_TREE_PLOT.
NOTE: There were 198 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set EMWS1.CLUS3_TREE_PLOT has 33 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.07 seconds
      cpu time            0.04 seconds
 
 
13615  data tempcolor;
13616  set WORK.OUTSTATS_TREE_10IRQ92;
13617  retain eventlevel;
13618  if STATNAME='PREDICTION' then eventlevel=CATEGORY;
13619  run;
 
NOTE: There were 198 observations read from the data set WORK.OUTSTATS_TREE_10IRQ92.
NOTE: The data set WORK.TEMPCOLOR has 198 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13620  data tempcolor;
13621  set tempcolor;
13622  if 'NOMINAL' ne 'INTERVAL' then do;
13623  if CATEGORY=EVENTLEVEL AND STATNAME="PROBABILITY";
13624  end;
13625  else do;
13626  if STATNAME="PREDICTION";
13627  end;
13628  run;
 
NOTE: There were 198 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 33 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13629  data tempcolor;
13630  set tempcolor;
13631  length nodecolor 8;
13632  if 'NOMINAL' ne 'INTERVAL' then do;
13633  nodecolor = round(100*(STATVALUE), .01);
13634  end;
13635  else do;
13636  nodecolor=round(statvalue, .01);
13637  end;
13638  keep node nodecolor;
13639  run;
 
NOTE: There were 33 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 33 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
13640  proc sort data=EMWS1.Clus3_TREE_PLOT;
13641  by node;
13642  run;
 
NOTE: There were 33 observations read from the data set EMWS1.CLUS3_TREE_PLOT.
NOTE: The data set EMWS1.CLUS3_TREE_PLOT has 33 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13643  proc sort data=tempcolor;
13644  by node;
13645  run;
 
NOTE: There were 33 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 33 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13646  data EMWS1.Clus3_TREE_PLOT;
13647  merge EMWS1.Clus3_TREE_PLOT tempcolor;
13648  by node;
13649  length traintotal 8;
13650  retain traintotal;
13651  label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
13652  if node=1 then do;
13653  traintotal = N;
13654  end;
13655  if NODE eq . then delete;
13656  run;
 
NOTE: There were 33 observations read from the data set EMWS1.CLUS3_TREE_PLOT.
NOTE: There were 33 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set EMWS1.CLUS3_TREE_PLOT has 33 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13657  data EMWS1.Clus3_TREE_PLOT;
13658  set EMWS1.Clus3_TREE_PLOT;
13659  textall = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodeId_vlabel, noquote, )):"|| put(Node, 13.)||'0A'x||trim(textall);
13660  run;
 
NOTE: There were 33 observations read from the data set EMWS1.CLUS3_TREE_PLOT.
NOTE: The data set EMWS1.CLUS3_TREE_PLOT has 33 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
13661  data tempout;
13662  set WORK.Clus3_outnodes;
13663  run;
 
NOTE: There were 33 observations read from the data set WORK.CLUS3_OUTNODES.
NOTE: The data set WORK.TEMPOUT has 33 observations and 27 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13664  proc sort data=tempout;
13665  by descending P__SEGMENT_3;
13666  run;
 
NOTE: There were 33 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TEMPOUT has 33 observations and 27 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13667  data tree_temp;
13668  set tempout;
13669  if LEAF ne .;
13670  label index="%sysfunc(sasmsg(sashelp.dmine, rpt_leafindex_vlabel  , NOQUOTE))";
13671  label percevent_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_perc_train_vlabel  , NOQUOTE))";
13672  label perc_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_percevent_train_vlabel  , NOQUOTE))";
13673  label tprob="%sysfunc(sasmsg(sashelp.dmine, rpt_prob_vlabel  , NOQUOTE, %nrbquote()))";
13674  tprob = round(P__SEGMENT_3, .01);
13675  percevent_train = round ( tprob*100, .01);
13676  *perc_train =round( ( N / traintotal)*100, .001);
13677  perc_train =round( ( N / traintotal), .01);
13678  if missing(perc_train) then perc_train = round( linkwidth*100, .001);
13679  index = _n_;
13680  keep NODE index tprob perc_train percevent_train
13681  ;
13682  run;
 
NOTE: There were 33 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TREE_TEMP has 17 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
13683  proc sort data=tree_temp;
13684  by NODE;
13685  run;
 
NOTE: There were 17 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set WORK.TREE_TEMP has 17 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13686  proc sort data=EMWS1.Clus3_TREE_PLOT;
13687  by NODE;
13688  run;
 
NOTE: There were 33 observations read from the data set EMWS1.CLUS3_TREE_PLOT.
NOTE: The data set EMWS1.CLUS3_TREE_PLOT has 33 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13689  data EMWS1.Clus3_TREE_PLOT;
13690  merge EMWS1.Clus3_TREE_PLOT tree_temp;
13691  by NODE;
13692  run;
 
NOTE: There were 33 observations read from the data set EMWS1.CLUS3_TREE_PLOT.
NOTE: There were 17 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set EMWS1.CLUS3_TREE_PLOT has 33 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13693  proc sort data=EMWS1.Clus3_TREE_PLOT;
13694  by node index;
13695  run;
 
NOTE: There were 33 observations read from the data set EMWS1.CLUS3_TREE_PLOT.
NOTE: The data set EMWS1.CLUS3_TREE_PLOT has 33 observations and 17 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13696  title9 ' ';
13697  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_VariableImportance_title, NOQUOTE))";
13698  proc print data=EMWS1.Clus3_OUTIMPORT(where=(IMPORTANCE>0)) noobs label;
13699  run;
 
NOTE: There were 12 observations read from the data set EMWS1.CLUS3_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13700  title10;
 
13701  data WORK.M14ABMEV;
13702  set WORK.M14ABMEV;
13703  if role eq 'REJECTED' then role = 'INPUT';
13704  run;
 
NOTE: There were 26 observations read from the data set WORK.M14ABMEV.
NOTE: The data set WORK.M14ABMEV has 26 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13705  proc sort data=EMWS1.Clus3_OUTIMPORT out=WORK.Clus3_GRAPHVARS(keep=NAME);
13706  where IMPORTANCE>0;
13707  by NAME;
13708  run;
 
NOTE: There were 12 observations read from the data set EMWS1.CLUS3_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The data set WORK.CLUS3_GRAPHVARS has 12 observations and 1 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13709  proc sort data = WORK.M14ABMEV;
13710  by NAME;
13711  run;
 
NOTE: There were 26 observations read from the data set WORK.M14ABMEV.
NOTE: The data set WORK.M14ABMEV has 26 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13712  data WORK.M14ABMEV;
13713  merge WORK.M14ABMEV WORK.Clus3_GRAPHVARS(in=_b_);
13714  by NAME;
13715  if _b_ or ROLE = "FREQ" or REPORT="Y" then output;
13716  run;
 
NOTE: There were 26 observations read from the data set WORK.M14ABMEV.
NOTE: There were 12 observations read from the data set WORK.CLUS3_GRAPHVARS.
NOTE: The data set WORK.M14ABMEV has 12 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13717  data WORK.M14ABMEV;
13718  set WORK.M14ABMEV end=_eof_ nobs=_nobs_;
13719  output;
13720  if _eof_ then do;
13721  name = '_SEGMENT_';
13722  ROLE = 'BY';
13723  LEVEL = 'NOMINAL';
13724  LABEL = 'Segment Variable';
13725  TYPE = 'N';
13726  FORMAT = '';
13727  INFORMAT = '';
13728  output;
13729  end;
13730  run;
 
NOTE: There were 12 observations read from the data set WORK.M14ABMEV.
NOTE: The data set WORK.M14ABMEV has 13 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13731  *------------------------------------------------------------* ;
13732  * Clus3: STDIZE Variables Macro ;
13733  *------------------------------------------------------------* ;
13734  %macro stdizevar;
13735      AffluenceGrade CleanserProducts DayCareProducts LotionProducts REP_Age
13736     REP_LoyaltyTime TimeSinceLastPurchase TotalSpend
13737  %mend stdizevar;
13738  *------------------------------------------------------------*;
13739  * Clus3: Computing Summary Statistics;
13740  *------------------------------------------------------------*;
13741  proc stdize
13742  data = EMWS1.Clus3_TRAIN
13743  out=_null_
13744  outstat=WORK.Clus3_STAT
13745  add=0 fuzz=1E-14 initial=MAD
13746  vardef=df
13747  method=STD
13748  mult=1
13749  pctlmtd=ORD_STAT pctldef=2
13750  pctlpts=(
13751  0
13752  100
13753  )
13754  ;
13755  var %stdizevar;
13756  run;
 
NOTE: INITIAL= will be ignored.
NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS1.IDS2_DATA.
NOTE: There were 23000 observations read from the data set EMWS1.REPL_TRAIN.
NOTE: View EMWS1.CLUS3_TRAIN.VIEW used (Total process time):
      real time           0.46 seconds
      cpu time            0.46 seconds
 
NOTE: There were 4224 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: There were 4224 observations read from the data set EMWS1.CLUS3_TRAIN.
NOTE: The data set WORK.CLUS3_STAT has 10 observations and 9 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.48 seconds
      cpu time            0.48 seconds
 
 
13757  quit;
 
13758  data WORK.Clus3_MINMAX;
13759  set WORK.Clus3_STAT;
13760  where _TYPE_ in('P0','P100');
13761  if _TYPE_='P0' then _TYPE_='MIN';
13762  else if _TYPE_='P100' then _TYPE_='MAX';
13763  run;
 
NOTE: There were 2 observations read from the data set WORK.CLUS3_STAT.
      WHERE _TYPE_ in ('P0', 'P100');
NOTE: The data set WORK.CLUS3_MINMAX has 2 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13764  proc transpose data=WORK.Clus3_MINMAX out=WORK.Clus3_MINMAX(drop=_LABEL_ rename=(_NAME_=_VARIABLE_));
13765  id _TYPE_;
13766  run;
 
NOTE: There were 2 observations read from the data set WORK.CLUS3_MINMAX.
NOTE: The data set WORK.CLUS3_MINMAX has 8 observations and 3 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13767  data WORK.Clus3_UGRID;
13768  set WORK.Clus3_MINMAX;
13769  B1 = MIN + (1-1)*(MAX-MIN)/8;
13770  B2 = MIN + (2-1)*(MAX-MIN)/8;
13771  B3 = MIN + (3-1)*(MAX-MIN)/8;
13772  B4 = MIN + (4-1)*(MAX-MIN)/8;
13773  B5 = MIN + (5-1)*(MAX-MIN)/8;
13774  B6 = MIN + (6-1)*(MAX-MIN)/8;
13775  B7 = MIN + (7-1)*(MAX-MIN)/8;
13776  B8 = MIN + (8-1)*(MAX-MIN)/8;
13777  B9 = MIN + (9-1)*(MAX-MIN)/8;
13778  drop MIN MAX;
13779  run;
 
NOTE: There were 8 observations read from the data set WORK.CLUS3_MINMAX.
NOTE: The data set WORK.CLUS3_UGRID has 8 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13780  *------------------------------------------------------------*;
13781  * Clus3: Creating formats for binning interval variables;
13782  *------------------------------------------------------------*;
13783  proc format;
13784  value F1_
13785  1-4.5 = "1:4.5"
13786  4.5-8 = "4.5:8"
13787  8-11.5 = "8:11.5"
13788  11.5-15 = "11.5:15"
13789  15-18.5 = "15:18.5"
13790  18.5-22 = "18.5:22"
13791  22-25.5 = "22:25.5"
13792  25.5-29 = "25.5:29"
13793  ;
NOTE: Format F1_ has been output.
13794  value F2_
13795  0-0.5 = "0:0.5"
13796  0.5-1 = "0.5:1"
13797  1-1.5 = "1:1.5"
13798  1.5-2 = "1.5:2"
13799  2-2.5 = "2:2.5"
13800  2.5-3 = "2.5:3"
13801  3-3.5 = "3:3.5"
13802  3.5-4 = "3.5:4"
13803  ;
NOTE: Format F2_ has been output.
13804  value F3_
13805  0-0.375 = "0:0.375"
13806  0.375-0.75 = "0.375:0.75"
13807  0.75-1.125 = "0.75:1.125"
13808  1.125-1.5 = "1.125:1.5"
13809  1.5-1.875 = "1.5:1.875"
13810  1.875-2.25 = "1.875:2.25"
13811  2.25-2.625 = "2.25:2.625"
13812  2.625-3 = "2.625:3"
13813  ;
NOTE: Format F3_ has been output.
13814  value F4_
13815  0-0.625 = "0:0.625"
13816  0.625-1.25 = "0.625:1.25"
13817  1.25-1.875 = "1.25:1.875"
13818  1.875-2.5 = "1.875:2.5"
13819  2.5-3.125 = "2.5:3.125"
13820  3.125-3.75 = "3.125:3.75"
13821  3.75-4.375 = "3.75:4.375"
13822  4.375-5 = "4.375:5"
13823  ;
NOTE: Format F4_ has been output.
13824  value F5_
13825  18-25.625 = "18:25.625"
13826  25.625-33.25 = "25.625:33.25"
13827  33.25-40.875 = "33.25:40.875"
13828  40.875-48.5 = "40.875:48.5"
13829  48.5-56.125 = "48.5:56.125"
13830  56.125-63.75 = "56.125:63.75"
13831  63.75-71.375 = "63.75:71.375"
13832  71.375-79 = "71.375:79"
13833  ;
NOTE: Format F5_ has been output.
13834  value F6_
13835  0-4.5 = "0:4.5"
13836  4.5-9 = "4.5:9"
13837  9-13.5 = "9:13.5"
13838  13.5-18 = "13.5:18"
13839  18-22.5 = "18:22.5"
13840  22.5-27 = "22.5:27"
13841  27-31.5 = "27:31.5"
13842  31.5-36 = "31.5:36"
13843  ;
NOTE: Format F6_ has been output.
13844  value F7_
13845  1-5.125 = "1:5.125"
13846  5.125-9.25 = "5.125:9.25"
13847  9.25-13.375 = "9.25:13.375"
13848  13.375-17.5 = "13.375:17.5"
13849  17.5-21.625 = "17.5:21.625"
13850  21.625-25.75 = "21.625:25.75"
13851  25.75-29.875 = "25.75:29.875"
13852  29.875-34 = "29.875:34"
13853  ;
NOTE: Format F7_ has been output.
13854  value F8_
13855  10-2508.75 = "10:2508.8"
13856  2508.75-5007.5 = "2508.8:5007.5"
13857  5007.5-7506.25 = "5007.5:7506.3"
13858  7506.25-10005 = "7506.3:10005"
13859  10005-12503.75 = "10005:12504"
13860  12503.75-15002.5 = "12504:15003"
13861  15002.5-17501.25 = "15003:17501"
13862  17501.25-20000 = "17501:20000"
13863  ;
NOTE: Format F8_ has been output.
13864  run;
 
NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13865  ods listing close;
13866  ods output crosstabfreqs=WORK.TEMPFREQ;
13867  proc freq data = EMWS1.Clus3_TRAIN order=formatted addnames;
13868  table AffluenceGrade * _SEGMENT_ / missing;
13869  table CleanserProducts * _SEGMENT_ / missing;
13870  table DayCareProducts * _SEGMENT_ / missing;
13871  table LotionProducts * _SEGMENT_ / missing;
13872  table LoyaltyClass * _SEGMENT_ / missing;
13873  table PreviousCampaign * _SEGMENT_ / missing;
13874  table REP_Age * _SEGMENT_ / missing;
13875  table REP_ClusterGroup * _SEGMENT_ / missing;
13876  table REP_Gender * _SEGMENT_ / missing;
13877  table REP_LoyaltyTime * _SEGMENT_ / missing;
13878  table TimeSinceLastPurchase * _SEGMENT_ / missing;
13879  table TotalSpend * _SEGMENT_ / missing;
13880  format AFFLUENCEGRADE F1_.;
13881  format CLEANSERPRODUCTS F2_.;
13882  format DAYCAREPRODUCTS F3_.;
13883  format LOTIONPRODUCTS F4_.;
13884  format REP_AGE F5_.;
13885  format REP_LOYALTYTIME F6_.;
13886  format TIMESINCELASTPURCHASE F7_.;
13887  format TOTALSPEND F8_.;
13888  run;
 
NOTE: There were 23000 observations read from the data set SUPERMKT.SUPERMARKETCAMPAIGN.
NOTE: There were 23000 observations read from the data set EMWS1.IDS2_DATA.
NOTE: There were 23000 observations read from the data set EMWS1.REPL_TRAIN.
NOTE: View EMWS1.CLUS3_TRAIN.VIEW used (Total process time):
      real time           0.54 seconds
      cpu time            0.51 seconds
 
NOTE: There were 4224 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: The data set WORK.TEMPFREQ has 400 observations and 23 variables.
NOTE: There were 4224 observations read from the data set EMWS1.CLUS3_TRAIN.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.60 seconds
      cpu time            0.56 seconds
 
 
13889  quit;
13890  ods listing;
13891  data EMWS1.Clus3_PROFILE(keep=_VARIABLE_ _SEGMENT_ TYPE COUNT PERCENT _X_ _XLABEL_);
13892  label _VARIABLE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel, NOQUOTE))" _SEGMENT_ = "Segment Variable" Type = "%sysfunc(sasmsg(sashelp.dmine, rpt_type_vlabel,         NOQUOTE))" _X_ =
13893     "%sysfunc(sasmsg(sashelp.dmine, rpt_numValue_vlabel, NOQUOTE))" _XLABEL_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_fmtValue_vlabel ,    NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel,        NOQUOTE))" PERCENT =
13894     "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel,      NOQUOTE))";
13895  dsid = open("WORK.TEMPFREQ");
13896  varnum = varnum(dsid, 'ROWVARIABLE');
13897  freqnum = varnum(dsid, 'FREQUENCY');
13898  pvarnum = varnum(dsid, 'PERCENT');
13899  typenum = varnum(dsid, '_TYPE_');
13900  bynum = varnum(dsid, "_SEGMENT_");
13901  length varformat _VARIABLE_ $32 _XLABEL_ $32 TYPE $1;
13902  do while(^fetch(dsid));
13903  count = getvarn(dsid, freqnum);
13904  percent = getvarn(dsid, pvarnum);
13905  _VARIABLE_ = strip(getvarc(dsid, varnum));
13906  varblnum = varnum(dsid, _VARIABLE_);
13907  _SEGMENT_ = getvarn(dsid, bynum);
13908  type = vartype(dsid, varblnum);
13909  varformat = varfmt(dsid, varblnum);
13910  if varformat eq '' then varformat = 'best12.';
13911  _X_=.;
13912  if type = 'N' then do;
13913  _X_ = getvarn(dsid, varblnum);
13914  _XLABEL_ = left(putn(_X_, varformat));
13915  end;
13916  else _XLABEL_ = getvarc(dsid, varblnum);
13917  if getvarc(dsid, typenum) = '11' then output;
13918  end;
13919  dsid = close(dsid);
13920  run;
 
NOTE: The data set EMWS1.CLUS3_PROFILE has 272 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
13921  proc sort data=EMWS1.Clus3_PROFILE NOTHREADS;
13922  by _VARIABLE_ _SEGMENT_;
13923  run;
 
NOTE: There were 272 observations read from the data set EMWS1.CLUS3_PROFILE.
NOTE: The data set EMWS1.CLUS3_PROFILE has 272 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13924  proc means data=EMWS1.Clus3_PROFILE noprint missing NWAY;
13925  class _VARIABLE_ _SEGMENT_;
13926  var COUNT;
13927  output out=WORK.Clus3_STATCOUNT(keep=_SEGMENT_ _VARIABLE_ SUM) SUM=SUM;
13928  run;
 
NOTE: There were 272 observations read from the data set EMWS1.CLUS3_PROFILE.
NOTE: The data set WORK.CLUS3_STATCOUNT has 48 observations and 3 variables.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
13929  proc sort data=WORK.Clus3_STATCOUNT NOTHREADS;
13930  by _VARIABLE_ _SEGMENT_;
13931  run;
 
NOTE: There were 48 observations read from the data set WORK.CLUS3_STATCOUNT.
NOTE: The data set WORK.CLUS3_STATCOUNT has 48 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13932  data EMWS1.Clus3_PROFILE(drop=SUM);
13933  label BYPERCENT= "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel, NOQUOTE, _SEGMENT_))";
13934  merge EMWS1.Clus3_PROFILE WORK.Clus3_STATCOUNT;
13935  by _VARIABLE_ _SEGMENT_;
13936  if SUM ne . then BYPERCENT = 100*COUNT/SUM;
13937  run;
 
NOTE: There were 272 observations read from the data set EMWS1.CLUS3_PROFILE.
NOTE: There were 48 observations read from the data set WORK.CLUS3_STATCOUNT.
NOTE: The data set EMWS1.CLUS3_PROFILE has 272 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13938  proc sort data=EMWS1.Clus3_PROFILE NOTHREADS;
13939  by _VARIABLE_;
13940  run;
 
NOTE: There were 272 observations read from the data set EMWS1.CLUS3_PROFILE.
NOTE: The data set EMWS1.CLUS3_PROFILE has 272 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13941  proc sort data=WORK.M14ABMEV;
13942  by Name;
13943  run;
 
NOTE: There were 13 observations read from the data set WORK.M14ABMEV.
NOTE: The data set WORK.M14ABMEV has 13 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13944  data EMWS1.Clus3_PROFILE;
13945  merge EMWS1.Clus3_PROFILE(in=_a) WORK.M14ABMEV(keep=Name Label Role rename=(Name=_Variable_ Label=_Label_));
13946  by _Variable_;
13947  label Role = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel ,  NOQUOTE))";
13948  label Label = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel , NOQUOTE))";
13949  if _a then output;
13950  run;
 
NOTE: Variable Label is uninitialized.
WARNING: Multiple lengths were specified for the BY variable _VARIABLE_ by input data sets. This might cause unexpected results.
NOTE: There were 272 observations read from the data set EMWS1.CLUS3_PROFILE.
NOTE: There were 13 observations read from the data set WORK.M14ABMEV.
NOTE: The data set EMWS1.CLUS3_PROFILE has 272 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13951  proc sort data=EMWS1.Clus3_PROFILE;
13952  by _SEGMENT_ _VARIABLE_ _X_;
13953  run;
 
NOTE: There were 272 observations read from the data set EMWS1.CLUS3_PROFILE.
NOTE: The data set EMWS1.CLUS3_PROFILE has 272 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13954  data EMWS1.Clus3_PROFILE(rename=(_VARIABLE_=Variable _X_=NumericValue _XLABEL_=FmtValue));
13955  set EMWS1.Clus3_PROFILE;
13956  retain orderedValue 0;
13957  label OrderedValue = "%sysfunc(sasmsg(sashelp.dmine, rpt_OrderedValue_vlabel, NOQUOTE))";
13958  by _SEGMENT_ _VARIABLE_;
13959  if first._variable_ then orderedValue=1;
13960  else orderedValue+1;
13961  run;
 
NOTE: There were 272 observations read from the data set EMWS1.CLUS3_PROFILE.
NOTE: The data set EMWS1.CLUS3_PROFILE has 272 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13962  proc transpose data=EMWS1.Clus3_OUTVAR out=WORK.Clus3_OUTVAR(where=(COL1 ^in('IMPUTED','OMITTED')));
13963  var AffluenceGrade--REP_RegionU;
13964  where _TYPE_ in('TYPE' 'VARIABLE');
13965  run;
 
NOTE: There were 2 observations read from the data set EMWS1.CLUS3_OUTVAR.
      WHERE _TYPE_ in ('TYPE', 'VARIABLE');
NOTE: The data set WORK.CLUS3_OUTVAR has 46 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13966  *------------------------------------------------------------* ;
13967  * Clus3: DMVQ Variables;
13968  *------------------------------------------------------------* ;
13969  %macro dmvqvars;
13970      AffluenceGrade CleanserProducts DayCareProducts LotionProducts
13971     NightRepairProducts REP_Age REP_LoyaltyTime TimeSinceLastPurchase TotalSpend
13972     CampaignViewedEmail0 CampaignViewedEmail1 LoyaltyClassGold LoyaltyClassPlatinum
13973     MobileApplications0 MobileApplications1 PreviousCampaign0 PreviousCampaign1
13974     REP_AdvertisementZBorder REP_AdvertisementZCentral_Z1
13975     REP_AdvertisementZE_Central REP_AdvertisementZN_Central
13976     REP_AdvertisementZN_East REP_AdvertisementZN_West REP_AdvertisementZNE_Z1
13977     REP_AdvertisementZNE_Z2 REP_AdvertisementZNE_Z3 REP_AdvertisementZS_Central
13978     REP_AdvertisementZS_East REP_AdvertisementZS_West REP_AdvertisementZU
13979     REP_AdvertisementZW_Central REP_ClusterGroupA REP_ClusterGroupB
13980     REP_ClusterGroupC REP_ClusterGroupD REP_ClusterGroupE REP_ClusterGroupF
13981     REP_ClusterGroupU REP_GenderF REP_GenderM REP_RegionCentral REP_RegionNorth
13982     REP_RegionNorthEast REP_RegionSouth_East REP_RegionSouth_West REP_RegionU
13983  %mend ;
13984
13985
 
13986  data WORK.Clus3_temp;
13987  set EMWS1.Clus3_OUTMEAN;
13988  _idvar_=left(put(_SEGMENT_,4.));
13989  run;
 
NOTE: There were 4 observations read from the data set EMWS1.CLUS3_OUTMEAN.
NOTE: The data set WORK.CLUS3_TEMP has 4 observations and 56 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13990  proc distance data=WORK.Clus3_temp out=EMWS1.Clus3_DISTANCE method=l(2) shape=square;
13991  id _idvar_;
13992  var interval(%dmvqvars);
13993  run;
 
NOTE: The data set EMWS1.CLUS3_DISTANCE has 4 observations and 5 variables.
NOTE: PROCEDURE DISTANCE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13994  proc mds data=EMWS1.Clus3_DISTANCE out=WORK.Clus3_mds level=absolute nohist shape=square dim=3;
13995  object _idvar_;
13996  run;
 
NOTE: Convergence assumed because the badness-of-fit criterion 3.104011E-10 is less than or equal to MINCRIT=1E-6.
NOTE: The data set WORK.CLUS3_MDS has 5 observations and 8 variables.
NOTE: PROCEDURE MDS used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
13997  quit;
13998  data WORK.Clus3_mds;
13999  set WORK.Clus3_mds;
14000  if _type_ ne 'CONFIG' then delete;
14001  run;
 
NOTE: There were 5 observations read from the data set WORK.CLUS3_MDS.
NOTE: The data set WORK.CLUS3_MDS has 4 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14002  data WORK.Clus3_mds(label="&label" keep=_idvar_ _radius_ dim1 dim2 dim3);
WARNING: Apparent symbolic reference LABEL not resolved.
14003  merge WORK.Clus3_temp WORK.Clus3_mds;
14004  run;
 
NOTE: There were 4 observations read from the data set WORK.CLUS3_TEMP.
NOTE: There were 4 observations read from the data set WORK.CLUS3_MDS.
NOTE: The data set WORK.CLUS3_MDS has 4 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14005  options nodate;
14006  title1 "%sysfunc(sasmsg(sashelp.dmine, rpt_ClusterDistance_title, NOQUOTE))";
14007  %plotit(data=WORK.Clus3_mds, datatype=mds, radii=_radius_, labelvar=_idvar_, symtype=circle, symbols='*', gout=WORK.Clus3, gname=DISTANCE, gopts2=nodisplay, gopts=device=GIF, gopplot=cback=white, titlecol=black, labelcol=black, tickcol=black,
14008     framecol=black, post=C:\Users\Mohamed\AppData\Local\Temp\SAS Temporary Files\_TD6116_DESKTOP-MVTLU7L_\plotit.ps);
 
                                                                                                                    Types Legend  | CONFIG
                                                                                                                    --------------+---------
                                                                                                                    Symbol Types  | circle
                                                                                                                    Symbols       | *
                                                                                                                    Symbol Colors | cx000000
                                                                                                                    Label  Colors | cx000000
                                                                                                                    Symbol Sizes  | 1
                                                                                                                    Label  Sizes  | 1
                                                                                                                    Symbol Fonts  | none
                                                                                                                    Label  Fonts  | none
                                                                                                                    ------------------------
 
                                                                                                         Iterative Scatter Plot of Labeled Points Macro
 
                                                                                                    Iteration    Place    Line Size    Page Size    Penalty
                                                                                                    -------------------------------------------------------
                                                                                                        1          2         65           45            0
 
The following code will create the printer plot on which the graphical plot is based:
 
options nonumber ls=65 ps=45;
proc plot nolegend formchar='|----|+|---' data=preproc vtoh=2;
   plot Dim2 * Dim1 $ _idvar_ = _symbol_ /
        haxis=by 1000 vaxis=by 1000 box list=1
        placement=((h=2 -2 : s=right left) (v=1 -1 * h=0 -1 to -5 by alt));
   label Dim2 = 'Dimension 2' Dim1 = 'Dimension 1';
   label Dim2 = '#' Dim1 = '#';
   run; quit;
 
The plot was created with the following goptions:
 
goptions nodisplay hpos=69 vpos=26 hsize=8.33in vsize=6.24in cback=white device=GIF;
 
The OUT=anno Annotate data set has 146 observations.
The PLOTIT macro used 1.3 seconds to create OUT=anno.
14009  goptions display;
14010  title;
 
14011  filename gsasfile "D:\Nida\Data
14011! mining\datamining\BOGO\Workspaces\EMWS1\Clus3\GRAPH\Distance.gif";
14012  goptions reset=all device=PNG display gaccess= gsasfile gsfmode= replace cback= white;
14013  proc greplay igout=WORK.Clus3 nofs;
NOTE: Building list of graphs from the catalog.
 
NOTE: Enter greplay commands or statements.
14014  replay DISTANCE;
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this
      session.
NOTE: 17420 bytes written to D:\Nida\Data
      mining\datamining\BOGO\Workspaces\EMWS1\Clus3\GRAPH\Distance.gif.
14015  quit;
 
NOTE: PROCEDURE GREPLAY used (Total process time):
      real time           0.32 seconds
      cpu time            0.32 seconds
 
 
14016  goptions reset=all;
14017  filename gsasfile;
NOTE: Fileref GSASFILE has been deassigned.
 
14018  proc datasets lib=EMWS1 nolist;
14019  modify Clus3_DISTANCE;
14020  rename _idvar_=_SEGMENT_;
NOTE: Renaming variable _idvar_ to _SEGMENT_.
14021  run;
 
NOTE: MODIFY was successful for EMWS1.CLUS3_DISTANCE.DATA.
14022  quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.07 seconds
      cpu time            0.06 seconds
 
 
14023  *------------------------------------------------------------*;
14024  * Clus3: Creating data set for Input Mean report;
14025  *------------------------------------------------------------*;
14026  data temp(drop=_type_ over_all);
14027  set EMWS1.Clus3_OUTSTAT;
14028  where _type_ in('DMDB_MEAN', 'CLUS_MEAN');
14029  run;
 
NOTE: There were 5 observations read from the data set EMWS1.CLUS3_OUTSTAT.
      WHERE _type_ in ('CLUS_MEAN', 'DMDB_MEAN');
NOTE: The data set WORK.TEMP has 5 observations and 47 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14030  proc sort data=temp;
14031  by _SEGMENT_;
14032  run;
 
NOTE: There were 5 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 5 observations and 47 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14033  proc stdize data=temp out=stdtemp pctlpts=0 100 outstat=stat;
14034  var AffluenceGrade--REP_RegionU;
14035  run;
 
NOTE: There were 5 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.STDTEMP has 5 observations and 47 variables.
NOTE: The data set WORK.STAT has 10 observations and 47 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14036  proc transpose data=stat out=tstat(rename=(COL1=MEAN COL2=STD COL3=MIN COL4=MAX));
14037  where _type_ in ('LOCATION', 'SCALE','P0', 'P100');
14038  run;
 
NOTE: There were 4 observations read from the data set WORK.STAT.
      WHERE _type_ in ('LOCATION', 'P0', 'P100', 'SCALE');
NOTE: The data set WORK.TSTAT has 46 observations and 6 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
14039  data tstat( rename=(_NAME_=NAME) keep=_NAME_ cv stdmin stdmax);
14040  set tstat;
14041  if std ^in (0, .) then do;
14042  stdmin = abs((min-mean)/std);
14043  stdmax = abs((max-mean)/std);
14044  end;
14045  if mean ^in(0, .) then cv = std/mean;
14046  run;
 
NOTE: There were 46 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 46 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
14047  proc sort data=tstat;
14048  by NAME;
14049  run;
 
NOTE: There were 46 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 46 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
14050  proc transpose data=stdtemp out=tstdtemp(rename=(_NAME_=NAME _LABEL_=LABEL COL1=MEAN));
14051  by _SEGMENT_;
14052  run;
 
NOTE: There were 5 observations read from the data set WORK.STDTEMP.
NOTE: The data set WORK.TSTDTEMP has 230 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14053  proc sort data=tstdtemp;
14054  by NAME;
14055  run;
 
NOTE: There were 230 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set WORK.TSTDTEMP has 230 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14056  data tstdtemp;
14057  merge tstdtemp tstat;
14058  by NAME;
14059  STDMEAN = (MEAN + stdmin)/(stdmin + stdmax);
14060  drop stdmin stdmax mean;
14061  run;
 
NOTE: There were 230 observations read from the data set WORK.TSTDTEMP.
NOTE: There were 46 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTDTEMP has 230 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
14062  proc transpose data=EMWS1.Clus3_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME
14062! VARIABLE=INPUT));
14063  var AffluenceGrade--REP_RegionU;
14064  id _type_;
14065  where _type_ = 'VARIABLE';
14066  run;
 
NOTE: There were 1 observations read from the data set EMWS1.CLUS3_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 47 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14067  proc sort data=tempVar;
14068  by NAME;
14069  run;
 
NOTE: There were 47 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 47 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14070  data EMWS1.Clus3_INPUTMEAN(rename=(NAME=VARIABLE));
14071  Length _SEGMENT_CHAR_ $7;
14072  label _SEGMENT_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentName_vlabel,  NOQUOTE))"
14072! _SEGMENT_CHAR_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentId_vlabel,    NOQUOTE))" NAME =
14072! "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel,     NOQUOTE))" INPUT =
14073     "%sysfunc(sasmsg(sashelp.dmine, rpt_input_vlabel,        NOQUOTE))" LABEL =
14073! "%sysfunc(sasmsg(sashelp.dmine, rpt_label_vlabel,        NOQUOTE))" CV =
14073! "%sysfunc(sasmsg(sashelp.dmine, rpt_cv_vlabel,           NOQUOTE))" STDMEAN =
14074     "%sysfunc(sasmsg(sashelp.dmine, rpt_normmean_vlabel,     NOQUOTE))";
14075  merge tempvar tstdtemp;
14076  by NAME;
14077  if LABEL='' then LABEL=NAME;
14078  _SEGMENT_CHAR_ = strip(put(_SEGMENT_, best.));
14079  if _SEGMENT_ = . then _SEGMENT_CHAR_='Overall';
14080  run;
 
NOTE: There were 47 observations read from the data set WORK.TEMPVAR.
NOTE: There were 230 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set EMWS1.CLUS3_INPUTMEAN has 231 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
14081  proc sort data=EMWS1.Clus3_INPUTMEAN;
14082  by descending cv;
14083  run;
 
NOTE: There were 231 observations read from the data set EMWS1.CLUS3_INPUTMEAN.
NOTE: The data set EMWS1.CLUS3_INPUTMEAN has 231 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14084  *------------------------------------------------------------*;
14085  * Clus3: Determining the important variables;
14086  *------------------------------------------------------------*;
 
14087  %let _nobs = 0;
14088  data keepvars(rename=(NAME=INPUT));
14089  set EMWS1.Clus3_OUTIMPORT(where=(IMPORTANCE>0.5)) end=eof;
14090  if eof then call symput('_nobs', strip(put(_N_, best.)));
14091  run;
 
NOTE: There were 5 observations read from the data set EMWS1.CLUS3_OUTIMPORT.
      WHERE IMPORTANCE>0.5;
NOTE: The data set WORK.KEEPVARS has 5 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
14092  proc transpose data=EMWS1.Clus3_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME
14092! VARIABLE=INPUT));
14093  var AffluenceGrade--REP_RegionU;
14094  id _type_;
14095  where _type_ = 'VARIABLE';
14096  run;
 
NOTE: There were 1 observations read from the data set EMWS1.CLUS3_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 47 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
14097  proc sort data=keepvars;
14098  by INPUT;
14099  run;
 
NOTE: There were 5 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.KEEPVARS has 5 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
14100  proc sort data=tempvar;
14101  by INPUT;
14102  run;
 
NOTE: There were 47 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 47 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14103  data vars;
14104  merge tempvar keepvars(in=b);
14105  by INPUT;
14106  if b then output;
14107  run;
 
WARNING: Multiple lengths were specified for the BY variable INPUT by input data sets. This might
         cause unexpected results.
NOTE: There were 47 observations read from the data set WORK.TEMPVAR.
NOTE: There were 5 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.VARS has 6 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14108  proc sort data=vars;
14109  by descending importance;
14110  run;
 
NOTE: There were 6 observations read from the data set WORK.VARS.
NOTE: The data set WORK.VARS has 6 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14111  data _null_;
14112  set vars;
14113  if _N_=1 then call symput('CLUS_PROFVARS', strip(NAME));
14114  else call symput('CLUS_PROFVARS',symget('CLUS_PROFVARS')!!' '!!strip(NAME));
14115  run;
 
NOTE: There were 6 observations read from the data set WORK.VARS.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14116  *------------------------------------------------------------*;
14117  * mergeVarMeansandClusLabel;
14118  *------------------------------------------------------------*;
14119  data temp(keep=_SEGMENT_ &CLUS_PROFVARS);
14120  length _SEGMENT_ &CLUS_PROFVARS 8;
14121  set EMWS1.Clus3_OUTSTAT;
14122  where _type_ ='CLUS_MEAN';
14123  run;
 
NOTE: There were 4 observations read from the data set EMWS1.CLUS3_OUTSTAT.
      WHERE _type_='CLUS_MEAN';
NOTE: The data set WORK.TEMP has 4 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
14124  proc sort data=temp;
14125  by _SEGMENT_;
14126  run;
 
NOTE: There were 4 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 4 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
14127  data EMWS1.Clus3_LABEL;
14128  merge EMWS1.Clus3_LABEL(keep=_SEGMENT_ LABEL) temp;
14129  by _SEGMENT_;
14130  run;
 
NOTE: There were 4 observations read from the data set EMWS1.CLUS3_LABEL.
NOTE: There were 4 observations read from the data set WORK.TEMP.
NOTE: The data set EMWS1.CLUS3_LABEL has 4 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
